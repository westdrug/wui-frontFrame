/*!
 * ====================================================
 * Kity Formula Render - v1.0.0 - 2014-07-30
 * https://github.com/kitygraph/formula
 * GitHub: https://github.com/kitygraph/formula.git 
 * Copyright (c) 2014 Baidu Kity Group; Licensed MIT
 * ====================================================
 */
(function(){var b={r:function(d){if(b[d].inited){return b[d].value}if(typeof b[d].value==="function"){var f={exports:{}},g=b[d].value(null,f.exports,f);b[d].inited=true;b[d].value=g;if(g!==undefined){return g}else{for(var e in f.exports){if(f.exports.hasOwnProperty(e)){b[d].inited=true;b[d].value=f.exports;return f.exports}}}}else{b[d].inited=true;return b[d].value}}};
/*!
 * canvg库封装
 * canvg官网： https://code.google.com/p/canvg/
 */
;b[0]={value:function(f){function e(s){this.ok=false;if(s.charAt(0)=="#"){s=s.substr(1,6)}s=s.replace(/ /g,"");s=s.toLowerCase();var m={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var o in m){if(s==o){s=m[o]}}var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}];for(var n=0;n<t.length;n++){var q=t[n].re;var p=t[n].process;var r=q.exec(s);if(r){channels=p(r);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r;this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g;this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var w=this.r.toString(16);var v=this.g.toString(16);var u=this.b.toString(16);if(w.length==1){w="0"+w}if(v.length==1){v="0"+v}if(u.length==1){u="0"+u}return"#"+w+v+u};this.getHelpXML=function(){var w=new Array();for(var y=0;y<t.length;y++){var v=t[y].example;for(var x=0;x<v.length;x++){w[w.length]=v[x]}}for(var D in m){w[w.length]=D}var z=document.createElement("ul");z.setAttribute("id","rgbcolor-examples");for(var y=0;y<w.length;y++){try{var A=document.createElement("li");var C=new e(w[y]);var E=document.createElement("div");E.style.cssText="margin: 3px; border: 1px solid black; background:"+C.toHex()+"; color:"+C.toHex();E.appendChild(document.createTextNode("test"));var u=document.createTextNode(" "+w[y]+" -> "+C.toRGB()+" -> "+C.toHex());A.appendChild(E);A.appendChild(u);z.appendChild(A)}catch(B){}}return z}}var d=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];var l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function h(t,r,s,m){var p=document.getElementById(t);var u=p.naturalWidth;var q=p.naturalHeight;var o=document.getElementById(r);o.style.width=u+"px";o.style.height=q+"px";o.width=u;o.height=q;var n=o.getContext("2d");n.clearRect(0,0,u,q);n.drawImage(p,0,0);if(isNaN(s)||s<1){return}if(m){k(r,0,0,u,q,s)}else{g(r,0,0,u,q,s)}}function k(W,Q,O,m,o,aa){if(isNaN(aa)||aa<1){return}aa|=0;var u=document.getElementById(W);var ak=u.getContext("2d");var af;try{try{af=ak.getImageData(Q,O,m,o)}catch(aj){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");af=ak.getImageData(Q,O,m,o)}catch(aj){alert("Cannot access local image");throw new Error("unable to access local image data: "+aj);return}}}catch(aj){alert("Cannot access image");throw new Error("unable to access image data: "+aj)}var t=af.data;var Y,X,ah,ae,E,H,A,r,s,N,ad,D,P,L,n,T,Z,F,C,z,G,I,J,S;var ai=aa+aa+1;var U=m<<2;var B=m-1;var ac=o-1;var w=aa+1;var ab=w*(w+1)/2;var R=new j();var M=R;for(ah=1;ah<ai;ah++){M=M.next=new j();if(ah==w){var v=M}}M.next=R;var ag=null;var V=null;A=H=0;var K=d[aa];var q=l[aa];for(X=0;X<o;X++){T=Z=F=C=r=s=N=ad=0;D=w*(z=t[H]);P=w*(G=t[H+1]);L=w*(I=t[H+2]);n=w*(J=t[H+3]);r+=ab*z;s+=ab*G;N+=ab*I;ad+=ab*J;M=R;for(ah=0;ah<w;ah++){M.r=z;M.g=G;M.b=I;M.a=J;M=M.next}for(ah=1;ah<w;ah++){ae=H+((B<ah?B:ah)<<2);r+=(M.r=z=t[ae])*(S=w-ah);s+=(M.g=G=t[ae+1])*S;N+=(M.b=I=t[ae+2])*S;ad+=(M.a=J=t[ae+3])*S;T+=z;Z+=G;F+=I;C+=J;M=M.next}ag=R;V=v;for(Y=0;Y<m;Y++){t[H+3]=J=ad*K>>q;if(J!=0){J=255/J;t[H]=(r*K>>q)*J;t[H+1]=(s*K>>q)*J;t[H+2]=(N*K>>q)*J}else{t[H]=t[H+1]=t[H+2]=0}r-=D;s-=P;N-=L;ad-=n;D-=ag.r;P-=ag.g;L-=ag.b;n-=ag.a;ae=A+((ae=Y+aa+1)<B?ae:B)<<2;T+=ag.r=t[ae];Z+=ag.g=t[ae+1];F+=ag.b=t[ae+2];C+=ag.a=t[ae+3];r+=T;s+=Z;N+=F;ad+=C;ag=ag.next;D+=z=V.r;P+=G=V.g;L+=I=V.b;n+=J=V.a;T-=z;Z-=G;F-=I;C-=J;V=V.next;H+=4}A+=m}for(Y=0;Y<m;Y++){Z=F=C=T=s=N=ad=r=0;H=Y<<2;D=w*(z=t[H]);P=w*(G=t[H+1]);L=w*(I=t[H+2]);n=w*(J=t[H+3]);r+=ab*z;s+=ab*G;N+=ab*I;ad+=ab*J;M=R;for(ah=0;ah<w;ah++){M.r=z;M.g=G;M.b=I;M.a=J;M=M.next}E=m;for(ah=1;ah<=aa;ah++){H=E+Y<<2;r+=(M.r=z=t[H])*(S=w-ah);s+=(M.g=G=t[H+1])*S;N+=(M.b=I=t[H+2])*S;ad+=(M.a=J=t[H+3])*S;T+=z;Z+=G;F+=I;C+=J;M=M.next;if(ah<ac){E+=m}}H=Y;ag=R;V=v;for(X=0;X<o;X++){ae=H<<2;t[ae+3]=J=ad*K>>q;if(J>0){J=255/J;t[ae]=(r*K>>q)*J;t[ae+1]=(s*K>>q)*J;t[ae+2]=(N*K>>q)*J}else{t[ae]=t[ae+1]=t[ae+2]=0}r-=D;s-=P;N-=L;ad-=n;D-=ag.r;P-=ag.g;L-=ag.b;n-=ag.a;ae=Y+((ae=X+w)<ac?ae:ac)*m<<2;r+=T+=ag.r=t[ae];s+=Z+=ag.g=t[ae+1];N+=F+=ag.b=t[ae+2];ad+=C+=ag.a=t[ae+3];ag=ag.next;D+=z=V.r;P+=G=V.g;L+=I=V.b;n+=J=V.a;T-=z;Z-=G;F-=I;C-=J;V=V.next;H+=m}}ak.putImageData(af,Q,O)}function g(T,N,L,m,n,X){if(isNaN(X)||X<1){return}X|=0;var t=document.getElementById(T);var ag=t.getContext("2d");var ab;try{try{ab=ag.getImageData(N,L,m,n)}catch(af){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");ab=ag.getImageData(N,L,m,n)}catch(af){alert("Cannot access local image");throw new Error("unable to access local image data: "+af);return}}}catch(af){alert("Cannot access image");throw new Error("unable to access image data: "+af)}var s=ab.data;var V,U,ad,aa,C,F,z,q,r,K,A,M,I,Q,W,D,w,E,G,P;var ae=X+X+1;var R=m<<2;var B=m-1;var Z=n-1;var v=X+1;var Y=v*(v+1)/2;var O=new j();var J=O;for(ad=1;ad<ae;ad++){J=J.next=new j();if(ad==v){var u=J}}J.next=O;var ac=null;var S=null;z=F=0;var H=d[X];var o=l[X];for(U=0;U<n;U++){Q=W=D=q=r=K=0;A=v*(w=s[F]);M=v*(E=s[F+1]);I=v*(G=s[F+2]);q+=Y*w;r+=Y*E;K+=Y*G;J=O;for(ad=0;ad<v;ad++){J.r=w;J.g=E;J.b=G;J=J.next}for(ad=1;ad<v;ad++){aa=F+((B<ad?B:ad)<<2);q+=(J.r=w=s[aa])*(P=v-ad);r+=(J.g=E=s[aa+1])*P;K+=(J.b=G=s[aa+2])*P;Q+=w;W+=E;D+=G;J=J.next}ac=O;S=u;for(V=0;V<m;V++){s[F]=q*H>>o;s[F+1]=r*H>>o;s[F+2]=K*H>>o;q-=A;r-=M;K-=I;A-=ac.r;M-=ac.g;I-=ac.b;aa=z+((aa=V+X+1)<B?aa:B)<<2;Q+=ac.r=s[aa];W+=ac.g=s[aa+1];D+=ac.b=s[aa+2];q+=Q;r+=W;K+=D;ac=ac.next;A+=w=S.r;M+=E=S.g;I+=G=S.b;Q-=w;W-=E;D-=G;S=S.next;F+=4}z+=m}for(V=0;V<m;V++){W=D=Q=r=K=q=0;F=V<<2;A=v*(w=s[F]);M=v*(E=s[F+1]);I=v*(G=s[F+2]);q+=Y*w;r+=Y*E;K+=Y*G;J=O;for(ad=0;ad<v;ad++){J.r=w;J.g=E;J.b=G;J=J.next}C=m;for(ad=1;ad<=X;ad++){F=C+V<<2;q+=(J.r=w=s[F])*(P=v-ad);r+=(J.g=E=s[F+1])*P;K+=(J.b=G=s[F+2])*P;Q+=w;W+=E;D+=G;J=J.next;if(ad<Z){C+=m}}F=V;ac=O;S=u;for(U=0;U<n;U++){aa=F<<2;s[aa]=q*H>>o;s[aa+1]=r*H>>o;s[aa+2]=K*H>>o;q-=A;r-=M;K-=I;A-=ac.r;M-=ac.g;I-=ac.b;aa=V+((aa=U+v)<Z?aa:Z)*m<<2;q+=Q+=ac.r=s[aa];r+=W+=ac.g=s[aa+1];K+=D+=ac.b=s[aa+2];ac=ac.next;A+=w=S.r;M+=E=S.g;I+=G=S.b;Q-=w;W-=E;D-=G;S=S.next;F+=m}}ag.putImageData(ab,N,L)}function j(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}(function(){this.canvg=function(u,x,n){if(u==null&&x==null&&n==null){var p=document.getElementsByTagName("svg");for(var r=0;r<p.length;r++){var q=p[r];var v=document.createElement("canvas");v.width=q.clientWidth;v.height=q.clientHeight;q.parentNode.insertBefore(v,q);q.parentNode.removeChild(q);var o=document.createElement("div");o.appendChild(q);canvg(v,o.innerHTML)}return}n=n||{};if(typeof u=="string"){u=document.getElementById(u)}if(u.svg!=null){u.svg.stop()}var t=m();if(!(u.childNodes.length==1&&u.childNodes[0].nodeName=="OBJECT")){u.svg=t}t.opts=n;var w=u.getContext("2d");if(typeof x.documentElement!="undefined"){t.loadXmlDoc(w,x)}else{if(x.substr(0,1)=="<"){t.loadXml(w,x)}else{t.load(w,x)}}};function m(){var n={};n.FRAMERATE=30;n.MAX_VIRTUAL_PIXELS=30000;n.init=function(o){var p=0;n.UniqueId=function(){p++;return"canvg"+p};n.Definitions={};n.Styles={};n.Animations=[];n.Images=[];n.ctx=o;n.ViewPort=new function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(r,q){this.viewPorts.push({width:r,height:q})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(q){if(q!=null&&typeof q=="number"){return q}if(q=="x"){return this.width()}if(q=="y"){return this.height()}return Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}()};n.init();n.ImagesLoaded=function(){for(var o=0;o<n.Images.length;o++){if(!n.Images[o].loaded){return false}}return true};n.trim=function(o){return o.replace(/^\s+|\s+$/g,"")};n.compressSpaces=function(o){return o.replace(/[\s\r\t\n]+/gm," ")};n.ajax=function(p){var o;if(window.XMLHttpRequest){o=new XMLHttpRequest()}else{o=new ActiveXObject("Microsoft.XMLHTTP")}if(o){o.open("GET",p,false);o.send(null);return o.responseText}return null};n.parseXml=function(o){if(window.DOMParser){var q=new DOMParser();return q.parseFromString(o,"text/xml")}else{o=o.replace(/<!DOCTYPE svg[^>]*>/,"");var p=new ActiveXObject("Microsoft.XMLDOM");p.async="false";p.loadXML(o);return p}};n.Property=function(o,p){this.name=o;this.value=p};n.Property.prototype.getValue=function(){return this.value};n.Property.prototype.hasValue=function(){return this.value!=null&&this.value!==""};n.Property.prototype.numValue=function(){if(!this.hasValue()){return 0}var o=parseFloat(this.value);if((this.value+"").match(/%$/)){o=o/100}return o};n.Property.prototype.valueOrDefault=function(o){if(this.hasValue()){return this.value}return o};n.Property.prototype.numValueOrDefault=function(o){if(this.hasValue()){return this.numValue()}return o};n.Property.prototype.addOpacity=function(p){var q=this.value;if(p!=null&&p!=""&&typeof this.value=="string"){var o=new e(this.value);if(o.ok){q="rgba("+o.r+", "+o.g+", "+o.b+", "+p+")"}}return new n.Property(this.name,q)};n.Property.prototype.getDefinition=function(){var o=this.value.match(/#([^\)'"]+)/);if(o){o=o[1]}if(!o){o=this.value}return n.Definitions[o]};n.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0};n.Property.prototype.getFillStyleDefinition=function(r,q){var o=this.getDefinition();if(o!=null&&o.createGradient){return o.createGradient(n.ctx,r,q)}if(o!=null&&o.createPattern){if(o.getHrefAttribute().hasValue()){var p=o.attribute("patternTransform");o=o.getHrefAttribute().getDefinition();if(p.hasValue()){o.attribute("patternTransform",true).value=p.value}}return o.createPattern(n.ctx,r)}return null};n.Property.prototype.getDPI=function(o){return 96};n.Property.prototype.getEM=function(q){var o=12;var p=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize);if(p.hasValue()){o=p.toPixels(q)}return o};n.Property.prototype.getUnits=function(){var o=this.value+"";return o.replace(/[0-9\.\-]/g,"")};n.Property.prototype.toPixels=function(q,o){if(!this.hasValue()){return 0}var p=this.value+"";if(p.match(/em$/)){return this.numValue()*this.getEM(q)}if(p.match(/ex$/)){return this.numValue()*this.getEM(q)/2}if(p.match(/px$/)){return this.numValue()}if(p.match(/pt$/)){return this.numValue()*this.getDPI(q)*(1/72)}if(p.match(/pc$/)){return this.numValue()*15}if(p.match(/cm$/)){return this.numValue()*this.getDPI(q)/2.54}if(p.match(/mm$/)){return this.numValue()*this.getDPI(q)/25.4}if(p.match(/in$/)){return this.numValue()*this.getDPI(q)}if(p.match(/%$/)){return this.numValue()*n.ViewPort.ComputeSize(q)}var r=this.numValue();if(o&&r<1){return r*n.ViewPort.ComputeSize(q)}return r};n.Property.prototype.toMilliseconds=function(){if(!this.hasValue()){return 0}var o=this.value+"";if(o.match(/s$/)){return this.numValue()*1000}if(o.match(/ms$/)){return this.numValue()}return this.numValue()};n.Property.prototype.toRadians=function(){if(!this.hasValue()){return 0}var o=this.value+"";if(o.match(/deg$/)){return this.numValue()*(Math.PI/180)}if(o.match(/grad$/)){return this.numValue()*(Math.PI/200)}if(o.match(/rad$/)){return this.numValue()}return this.numValue()*(Math.PI/180)};n.Font=new function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(v,s,q,u,p,r){var t=r!=null?this.Parse(r):this.CreateFont("","","","","",n.ctx.font);return{fontFamily:p||t.fontFamily,fontSize:u||t.fontSize,fontStyle:v||t.fontStyle,fontWeight:q||t.fontWeight,fontVariant:s||t.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var o=this;this.Parse=function(r){var t={};var u=n.trim(n.compressSpaces(r||"")).split(" ");var v={fontSize:false,fontStyle:false,fontWeight:false,fontVariant:false};var p="";for(var q=0;q<u.length;q++){if(!v.fontStyle&&o.Styles.indexOf(u[q])!=-1){if(u[q]!="inherit"){t.fontStyle=u[q]}v.fontStyle=true}else{if(!v.fontVariant&&o.Variants.indexOf(u[q])!=-1){if(u[q]!="inherit"){t.fontVariant=u[q]}v.fontStyle=v.fontVariant=true}else{if(!v.fontWeight&&o.Weights.indexOf(u[q])!=-1){if(u[q]!="inherit"){t.fontWeight=u[q]}v.fontStyle=v.fontVariant=v.fontWeight=true}else{if(!v.fontSize){if(u[q]!="inherit"){t.fontSize=u[q].split("/")[0]}v.fontStyle=v.fontVariant=v.fontWeight=v.fontSize=true}else{if(u[q]!="inherit"){p+=u[q]}}}}}}if(p!=""){t.fontFamily=p}return t}}();n.ToNumberArray=function(q){var o=n.trim(n.compressSpaces((q||"").replace(/,/g," "))).split(" ");for(var p=0;p<o.length;p++){o[p]=parseFloat(o[p])}return o};n.Point=function(o,p){this.x=o;this.y=p};n.Point.prototype.angleTo=function(o){return Math.atan2(o.y-this.y,o.x-this.x)};n.Point.prototype.applyTransform=function(o){var p=this.x*o[0]+this.y*o[2]+o[4];var q=this.x*o[1]+this.y*o[3]+o[5];this.x=p;this.y=q};n.CreatePoint=function(p){var o=n.ToNumberArray(p);return new n.Point(o[0],o[1])};n.CreatePath=function(q){var o=n.ToNumberArray(q);var r=[];for(var p=0;p<o.length;p+=2){r.push(new n.Point(o[p],o[p+1]))}return r};n.BoundingBox=function(p,r,o,q){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(s,t){if(s!=null){if(isNaN(this.x1)||isNaN(this.x2)){this.x1=s;this.x2=s}if(s<this.x1){this.x1=s}if(s>this.x2){this.x2=s}}if(t!=null){if(isNaN(this.y1)||isNaN(this.y2)){this.y1=t;this.y2=t}if(t<this.y1){this.y1=t}if(t>this.y2){this.y2=t}}};this.addX=function(s){this.addPoint(s,null)};this.addY=function(s){this.addPoint(null,s)};this.addBoundingBox=function(s){this.addPoint(s.x1,s.y1);this.addPoint(s.x2,s.y2)};this.addQuadraticCurve=function(x,w,t,s,z,y){var v=x+2/3*(t-x);var u=w+2/3*(s-w);var B=v+1/3*(z-x);var A=u+1/3*(y-w);this.addBezierCurve(x,w,v,B,u,A,z,y)};this.addBezierCurve=function(G,F,x,v,C,A,I,H){var y=[G,F],w=[x,v],u=[C,A],s=[I,H];this.addPoint(y[0],y[1]);this.addPoint(s[0],s[1]);for(i=0;i<=1;i++){var J=function(N){return Math.pow(1-N,3)*y[i]+3*Math.pow(1-N,2)*N*w[i]+3*(1-N)*Math.pow(N,2)*u[i]+Math.pow(N,3)*s[i]};var L=6*y[i]-12*w[i]+6*u[i];var M=-3*y[i]+9*w[i]-9*u[i]+3*s[i];var K=3*w[i]-3*y[i];if(M==0){if(L==0){continue}var E=-K/L;if(0<E&&E<1){if(i==0){this.addX(J(E))}if(i==1){this.addY(J(E))}}continue}var z=Math.pow(L,2)-4*K*M;if(z<0){continue}var D=(-L+Math.sqrt(z))/(2*M);if(0<D&&D<1){if(i==0){this.addX(J(D))}if(i==1){this.addY(J(D))}}var B=(-L-Math.sqrt(z))/(2*M);if(0<B&&B<1){if(i==0){this.addX(J(B))}if(i==1){this.addY(J(B))}}}};this.isPointInBox=function(s,t){return this.x1<=s&&s<=this.x2&&this.y1<=t&&t<=this.y2};this.addPoint(p,r);this.addPoint(o,q)};n.Transform=function(o){var u=this;this.Type={};this.Type.translate=function(v){this.p=n.CreatePoint(v);this.apply=function(s){s.translate(this.p.x||0,this.p.y||0)};this.unapply=function(s){s.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(s){s.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(x){var v=n.ToNumberArray(x);this.angle=new n.Property("angle",v[0]);this.cx=v[1]||0;this.cy=v[2]||0;this.apply=function(s){s.translate(this.cx,this.cy);s.rotate(this.angle.toRadians());s.translate(-this.cx,-this.cy)};this.unapply=function(s){s.translate(this.cx,this.cy);s.rotate(-1*this.angle.toRadians());s.translate(-this.cx,-this.cy)};this.applyToPoint=function(y){var s=this.angle.toRadians();y.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);y.applyTransform([Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]);y.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(v){this.p=n.CreatePoint(v);this.apply=function(s){s.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(s){s.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(s){s.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(v){this.m=n.ToNumberArray(v);this.apply=function(s){s.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.applyToPoint=function(s){s.applyTransform(this.m)}};this.Type.SkewBase=function(v){this.base=u.Type.matrix;this.base(v);this.angle=new n.Property("angle",v)};this.Type.SkewBase.prototype=new this.Type.matrix();this.Type.skewX=function(v){this.base=u.Type.SkewBase;this.base(v);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase();this.Type.skewY=function(v){this.base=u.Type.SkewBase;this.base(v);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase();this.transforms=[];this.apply=function(s){for(var v=0;v<this.transforms.length;v++){this.transforms[v].apply(s)}};this.unapply=function(s){for(var v=this.transforms.length-1;v>=0;v--){this.transforms[v].unapply(s)}};this.applyToPoint=function(v){for(var s=0;s<this.transforms.length;s++){this.transforms[s].applyToPoint(v)}};var w=n.trim(n.compressSpaces(o)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var q=0;q<w.length;q++){var t=n.trim(w[q].split("(")[0]);var r=w[q].split("(")[1].replace(")","");var p=new this.Type[t](r);p.type=t;this.transforms.push(p)}};n.AspectRatio=function(D,B,p,v,C,o,s,r,A,z){B=n.compressSpaces(B);B=B.replace(/^defer\s/,"");var u=B.split(" ")[0]||"xMidYMid";var q=B.split(" ")[1]||"meet";var y=p/v;var x=C/o;var t=Math.min(y,x);var w=Math.max(y,x);if(q=="meet"){v*=t;o*=t}if(q=="slice"){v*=w;o*=w}A=new n.Property("refX",A);z=new n.Property("refY",z);if(A.hasValue()&&z.hasValue()){D.translate(-t*A.toPixels("x"),-t*z.toPixels("y"))}else{if(u.match(/^xMid/)&&(q=="meet"&&t==x||q=="slice"&&w==x)){D.translate(p/2-v/2,0)}if(u.match(/YMid$/)&&(q=="meet"&&t==y||q=="slice"&&w==y)){D.translate(0,C/2-o/2)}if(u.match(/^xMax/)&&(q=="meet"&&t==x||q=="slice"&&w==x)){D.translate(p-v,0)}if(u.match(/YMax$/)&&(q=="meet"&&t==y||q=="slice"&&w==y)){D.translate(0,C-o)}}if(u=="none"){D.scale(y,x)}else{if(q=="meet"){D.scale(t,t)}else{if(q=="slice"){D.scale(w,w)}}}D.translate(s==null?0:-s,r==null?0:-r)};n.Element={};n.EmptyProperty=new n.Property("EMPTY","");n.Element.ElementBase=function(s){this.attributes={};this.styles={};this.children=[];this.attribute=function(A,B){var z=this.attributes[A];if(z!=null){return z}if(B==true){z=new n.Property(A,"");this.attributes[A]=z}return z||n.EmptyProperty};this.getHrefAttribute=function(){for(var z in this.attributes){if(z.match(/:href$/)){return this.attributes[z]}}return n.EmptyProperty};this.style=function(A,E){var B=this.styles[A];if(B!=null){return B}var z=this.attribute(A);if(z!=null&&z.hasValue()){this.styles[A]=z;return z}var C=this.parent;if(C!=null){var D=C.style(A);if(D!=null&&D.hasValue()){return D}}if(E==true){B=new n.Property(A,"");this.styles[A]=B}return B||n.EmptyProperty};this.render=function(A){if(this.style("display").value=="none"){return}if(this.attribute("visibility").value=="hidden"){return}A.save();if(this.attribute("mask").hasValue()){var z=this.attribute("mask").getDefinition();if(z!=null){z.apply(A,this)}}else{if(this.style("filter").hasValue()){var B=this.style("filter").getDefinition();if(B!=null){B.apply(A,this)}}else{this.setContext(A);this.renderChildren(A);this.clearContext(A)}}A.restore()};this.setContext=function(z){};this.clearContext=function(z){};this.renderChildren=function(z){for(var A=0;A<this.children.length;A++){this.children[A].render(z)}};this.addChild=function(A,z){var B=A;if(z){B=n.CreateElement(A)}B.parent=this;this.children.push(B)};if(s!=null&&s.nodeType==1){for(var v=0;v<s.childNodes.length;v++){var o=s.childNodes[v];if(o.nodeType==1){this.addChild(o,true)}if(this.captureTextNodes&&o.nodeType==3){var x=o.nodeValue||o.text||"";if(n.trim(n.compressSpaces(x))!=""){this.addChild(new n.Element.tspan(o),false)}}}for(var v=0;v<s.attributes.length;v++){var r=s.attributes[v];this.attributes[r.nodeName]=new n.Property(r.nodeName,r.nodeValue)}var y=n.Styles[s.nodeName];if(y!=null){for(var q in y){this.styles[q]=y[q]}}if(this.attribute("class").hasValue()){var t=n.compressSpaces(this.attribute("class").value).split(" ");for(var u=0;u<t.length;u++){y=n.Styles["."+t[u]];if(y!=null){for(var q in y){this.styles[q]=y[q]}}y=n.Styles[s.nodeName+"."+t[u]];if(y!=null){for(var q in y){this.styles[q]=y[q]}}}}if(this.attribute("id").hasValue()){var y=n.Styles["#"+this.attribute("id").value];if(y!=null){for(var q in y){this.styles[q]=y[q]}}}if(this.attribute("style").hasValue()){var y=this.attribute("style").value.split(";");for(var v=0;v<y.length;v++){if(n.trim(y[v])!=""){var p=y[v].split(":");var q=n.trim(p[0]);var w=n.trim(p[1]);this.styles[q]=new n.Property(q,w)}}}if(this.attribute("id").hasValue()){if(n.Definitions[this.attribute("id").value]==null){n.Definitions[this.attribute("id").value]=this}}}};n.Element.RenderedElementBase=function(o){this.base=n.Element.ElementBase;this.base(o);this.setContext=function(x){if(this.style("fill").isUrlDefinition()){var u=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));if(u!=null){x.fillStyle=u}}else{if(this.style("fill").hasValue()){var w=this.style("fill");if(w.value=="currentColor"){w.value=this.style("color").value}x.fillStyle=w.value=="none"?"rgba(0,0,0,0)":w.value}}if(this.style("fill-opacity").hasValue()){var w=new n.Property("fill",x.fillStyle);w=w.addOpacity(this.style("fill-opacity").value);x.fillStyle=w.value}if(this.style("stroke").isUrlDefinition()){var u=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));if(u!=null){x.strokeStyle=u}}else{if(this.style("stroke").hasValue()){var v=this.style("stroke");if(v.value=="currentColor"){v.value=this.style("color").value}x.strokeStyle=v.value=="none"?"rgba(0,0,0,0)":v.value}}if(this.style("stroke-opacity").hasValue()){var v=new n.Property("stroke",x.strokeStyle);v=v.addOpacity(this.style("stroke-opacity").value);x.strokeStyle=v.value}if(this.style("stroke-width").hasValue()){var t=this.style("stroke-width").toPixels();x.lineWidth=t==0?0.001:t}if(this.style("stroke-linecap").hasValue()){x.lineCap=this.style("stroke-linecap").value}if(this.style("stroke-linejoin").hasValue()){x.lineJoin=this.style("stroke-linejoin").value}if(this.style("stroke-miterlimit").hasValue()){x.miterLimit=this.style("stroke-miterlimit").value}if(this.style("stroke-dasharray").hasValue()){var r=n.ToNumberArray(this.style("stroke-dasharray").value);if(typeof x.setLineDash!="undefined"){x.setLineDash(r)}else{if(typeof x.webkitLineDash!="undefined"){x.webkitLineDash=r}else{if(typeof x.mozDash!="undefined"){x.mozDash=r}}}var s=this.style("stroke-dashoffset").numValueOrDefault(1);if(typeof x.lineDashOffset!="undefined"){x.lineDashOffset=s}else{if(typeof x.webkitLineDashOffset!="undefined"){x.webkitLineDashOffset=s}else{if(typeof x.mozDashOffset!="undefined"){x.mozDashOffset=s}}}}if(typeof x.font!="undefined"){x.font=n.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()}if(this.attribute("transform").hasValue()){var p=new n.Transform(this.attribute("transform").value);p.apply(x)}if(this.style("clip-path").hasValue()){var q=this.style("clip-path").getDefinition();if(q!=null){q.apply(x)}}if(this.style("opacity").hasValue()){x.globalAlpha=this.style("opacity").numValue()}}};n.Element.RenderedElementBase.prototype=new n.Element.ElementBase();n.Element.PathElementBase=function(o){this.base=n.Element.RenderedElementBase;this.base(o);this.path=function(p){if(p!=null){p.beginPath()}return new n.BoundingBox()};this.renderChildren=function(q){this.path(q);n.Mouse.checkPath(this,q);if(q.fillStyle!=""){if(this.attribute("fill-rule").hasValue()){q.fill(this.attribute("fill-rule").value)}else{q.fill()}}if(q.strokeStyle!=""){q.stroke()}var s=this.getMarkers();if(s!=null){if(this.style("marker-start").isUrlDefinition()){var p=this.style("marker-start").getDefinition();p.render(q,s[0][0],s[0][1])}if(this.style("marker-mid").isUrlDefinition()){var p=this.style("marker-mid").getDefinition();for(var r=1;r<s.length-1;r++){p.render(q,s[r][0],s[r][1])}}if(this.style("marker-end").isUrlDefinition()){var p=this.style("marker-end").getDefinition();p.render(q,s[s.length-1][0],s[s.length-1][1])}}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};n.Element.PathElementBase.prototype=new n.Element.RenderedElementBase();n.Element.svg=function(o){this.base=n.Element.RenderedElementBase;this.base(o);this.baseClearContext=this.clearContext;this.clearContext=function(p){this.baseClearContext(p);n.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(s){s.strokeStyle="rgba(0,0,0,0)";s.lineCap="butt";s.lineJoin="miter";s.miterLimit=4;this.baseSetContext(s);if(!this.attribute("x").hasValue()){this.attribute("x",true).value=0}if(!this.attribute("y").hasValue()){this.attribute("y",true).value=0}s.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var t=n.ViewPort.width();var r=n.ViewPort.height();if(!this.attribute("width").hasValue()){this.attribute("width",true).value="100%"}if(!this.attribute("height").hasValue()){this.attribute("height",true).value="100%"}if(typeof this.root=="undefined"){t=this.attribute("width").toPixels("x");r=this.attribute("height").toPixels("y");var q=0;var w=0;if(this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()){q=-this.attribute("refX").toPixels("x");w=-this.attribute("refY").toPixels("y")}s.beginPath();s.moveTo(q,w);s.lineTo(t,w);s.lineTo(t,r);s.lineTo(q,r);s.closePath();s.clip()}n.ViewPort.SetCurrent(t,r);if(this.attribute("viewBox").hasValue()){var u=n.ToNumberArray(this.attribute("viewBox").value);var p=u[0];var v=u[1];t=u[2];r=u[3];n.AspectRatio(s,this.attribute("preserveAspectRatio").value,n.ViewPort.width(),t,n.ViewPort.height(),r,p,v,this.attribute("refX").value,this.attribute("refY").value);n.ViewPort.RemoveCurrent();n.ViewPort.SetCurrent(u[2],u[3])}}};n.Element.svg.prototype=new n.Element.RenderedElementBase();n.Element.rect=function(o){this.base=n.Element.PathElementBase;this.base(o);this.path=function(r){var q=this.attribute("x").toPixels("x");var v=this.attribute("y").toPixels("y");var s=this.attribute("width").toPixels("x");var p=this.attribute("height").toPixels("y");var u=this.attribute("rx").toPixels("x");var t=this.attribute("ry").toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()){t=u}if(this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()){u=t}u=Math.min(u,s/2);t=Math.min(t,p/2);if(r!=null){r.beginPath();r.moveTo(q+u,v);r.lineTo(q+s-u,v);r.quadraticCurveTo(q+s,v,q+s,v+t);r.lineTo(q+s,v+p-t);r.quadraticCurveTo(q+s,v+p,q+s-u,v+p);r.lineTo(q+u,v+p);r.quadraticCurveTo(q,v+p,q,v+p-t);r.lineTo(q,v+t);r.quadraticCurveTo(q,v,q+u,v);r.closePath()}return new n.BoundingBox(q,v,q+s,v+p)}};n.Element.rect.prototype=new n.Element.PathElementBase();n.Element.circle=function(o){this.base=n.Element.PathElementBase;this.base(o);this.path=function(q){var p=this.attribute("cx").toPixels("x");var t=this.attribute("cy").toPixels("y");var s=this.attribute("r").toPixels();if(q!=null){q.beginPath();q.arc(p,t,s,0,Math.PI*2,true);q.closePath()}return new n.BoundingBox(p-s,t-s,p+s,t+s)}};n.Element.circle.prototype=new n.Element.PathElementBase();n.Element.ellipse=function(o){this.base=n.Element.PathElementBase;this.base(o);this.path=function(q){var s=4*((Math.sqrt(2)-1)/3);var t=this.attribute("rx").toPixels("x");var r=this.attribute("ry").toPixels("y");var p=this.attribute("cx").toPixels("x");var u=this.attribute("cy").toPixels("y");if(q!=null){q.beginPath();q.moveTo(p,u-r);q.bezierCurveTo(p+s*t,u-r,p+t,u-s*r,p+t,u);q.bezierCurveTo(p+t,u+s*r,p+s*t,u+r,p,u+r);q.bezierCurveTo(p-s*t,u+r,p-t,u+s*r,p-t,u);q.bezierCurveTo(p-t,u-s*r,p-s*t,u-r,p,u-r);q.closePath()}return new n.BoundingBox(p-t,u-r,p+t,u+r)}};n.Element.ellipse.prototype=new n.Element.PathElementBase();n.Element.line=function(o){this.base=n.Element.PathElementBase;this.base(o);this.getPoints=function(){return[new n.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new n.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(p){var q=this.getPoints();if(p!=null){p.beginPath();p.moveTo(q[0].x,q[0].y);p.lineTo(q[1].x,q[1].y)}return new n.BoundingBox(q[0].x,q[0].y,q[1].x,q[1].y)};this.getMarkers=function(){var q=this.getPoints();var p=q[0].angleTo(q[1]);return[[q[0],p],[q[1],p]]}};n.Element.line.prototype=new n.Element.PathElementBase();n.Element.polyline=function(o){this.base=n.Element.PathElementBase;this.base(o);this.points=n.CreatePath(this.attribute("points").value);this.path=function(p){var r=new n.BoundingBox(this.points[0].x,this.points[0].y);if(p!=null){p.beginPath();p.moveTo(this.points[0].x,this.points[0].y)}for(var q=1;q<this.points.length;q++){r.addPoint(this.points[q].x,this.points[q].y);if(p!=null){p.lineTo(this.points[q].x,this.points[q].y)}}return r};this.getMarkers=function(){var q=[];for(var p=0;p<this.points.length-1;p++){q.push([this.points[p],this.points[p].angleTo(this.points[p+1])])}q.push([this.points[this.points.length-1],q[q.length-1][1]]);return q}};n.Element.polyline.prototype=new n.Element.PathElementBase();n.Element.polygon=function(o){this.base=n.Element.polyline;this.base(o);this.basePath=this.path;this.path=function(p){var q=this.basePath(p);if(p!=null){p.lineTo(this.points[0].x,this.points[0].y);p.closePath()}return q}};n.Element.polygon.prototype=new n.Element.polyline();n.Element.path=function(o){this.base=n.Element.PathElementBase;this.base(o);var p=this.attribute("d").value;p=p.replace(/,/gm," ");p=p.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");p=p.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");p=p.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");p=p.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");p=p.replace(/([0-9])([+\-])/gm,"$1 $2");p=p.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");p=p.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");p=n.compressSpaces(p);p=n.trim(p);this.PathParser=new function(q){this.tokens=q.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new n.Point(0,0);this.control=new n.Point(0,0);this.current=new n.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){if(this.isEnd()){return true}return this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return true;break}return false};this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var r=new n.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(r)};this.getAsControlPoint=function(){var r=this.getPoint();this.control=r;return r};this.getAsCurrentPoint=function(){var r=this.getPoint();this.current=r;return r};this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t"){return this.current}var r=new n.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return r};this.makeAbsolute=function(r){if(this.isRelativeCommand()){r.x+=this.current.x;r.y+=this.current.y}return r};this.addMarker=function(s,t,r){if(r!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null){this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(r)}this.addMarkerAngle(s,t==null?null:t.angleTo(s))};this.addMarkerAngle=function(s,r){this.points.push(s);this.angles.push(r)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var s=0;s<this.angles.length;s++){if(this.angles[s]==null){for(var r=s+1;r<this.angles.length;r++){if(this.angles[r]!=null){this.angles[s]=this.angles[r];break}}}}return this.angles}}(p);this.path=function(Q){var S=this.PathParser;S.reset();var D=new n.BoundingBox();if(Q!=null){Q.beginPath()}while(!S.isEnd()){S.nextCommand();switch(S.command){case"M":case"m":var N=S.getAsCurrentPoint();S.addMarker(N);D.addPoint(N.x,N.y);if(Q!=null){Q.moveTo(N.x,N.y)}S.start=S.current;while(!S.isCommandOrEnd()){var N=S.getAsCurrentPoint();S.addMarker(N,S.start);D.addPoint(N.x,N.y);if(Q!=null){Q.lineTo(N.x,N.y)}}break;case"L":case"l":while(!S.isCommandOrEnd()){var W=S.current;var N=S.getAsCurrentPoint();S.addMarker(N,W);D.addPoint(N.x,N.y);if(Q!=null){Q.lineTo(N.x,N.y)}}break;case"H":case"h":while(!S.isCommandOrEnd()){var w=new n.Point((S.isRelativeCommand()?S.current.x:0)+S.getScalar(),S.current.y);S.addMarker(w,S.current);S.current=w;D.addPoint(S.current.x,S.current.y);if(Q!=null){Q.lineTo(S.current.x,S.current.y)}}break;case"V":case"v":while(!S.isCommandOrEnd()){var w=new n.Point(S.current.x,(S.isRelativeCommand()?S.current.y:0)+S.getScalar());S.addMarker(w,S.current);S.current=w;D.addPoint(S.current.x,S.current.y);if(Q!=null){Q.lineTo(S.current.x,S.current.y)}}break;case"C":case"c":while(!S.isCommandOrEnd()){var U=S.current;var y=S.getPoint();var z=S.getAsControlPoint();var F=S.getAsCurrentPoint();S.addMarker(F,z,y);D.addBezierCurve(U.x,U.y,y.x,y.y,z.x,z.y,F.x,F.y);if(Q!=null){Q.bezierCurveTo(y.x,y.y,z.x,z.y,F.x,F.y)}}break;case"S":case"s":while(!S.isCommandOrEnd()){var U=S.current;var y=S.getReflectedControlPoint();var z=S.getAsControlPoint();var F=S.getAsCurrentPoint();S.addMarker(F,z,y);D.addBezierCurve(U.x,U.y,y.x,y.y,z.x,z.y,F.x,F.y);if(Q!=null){Q.bezierCurveTo(y.x,y.y,z.x,z.y,F.x,F.y)}}break;case"Q":case"q":while(!S.isCommandOrEnd()){var U=S.current;var z=S.getAsControlPoint();var F=S.getAsCurrentPoint();S.addMarker(F,z,z);D.addQuadraticCurve(U.x,U.y,z.x,z.y,F.x,F.y);if(Q!=null){Q.quadraticCurveTo(z.x,z.y,F.x,F.y)}}break;case"T":case"t":while(!S.isCommandOrEnd()){var U=S.current;var z=S.getReflectedControlPoint();S.control=z;var F=S.getAsCurrentPoint();S.addMarker(F,z,z);D.addQuadraticCurve(U.x,U.y,z.x,z.y,F.x,F.y);if(Q!=null){Q.quadraticCurveTo(z.x,z.y,F.x,F.y)}}break;case"A":case"a":while(!S.isCommandOrEnd()){var U=S.current;var C=S.getScalar();var B=S.getScalar();var t=S.getScalar()*(Math.PI/180);var E=S.getScalar();var A=S.getScalar();var F=S.getAsCurrentPoint();var Z=new n.Point(Math.cos(t)*(U.x-F.x)/2+Math.sin(t)*(U.y-F.y)/2,-Math.sin(t)*(U.x-F.x)/2+Math.cos(t)*(U.y-F.y)/2);var R=Math.pow(Z.x,2)/Math.pow(C,2)+Math.pow(Z.y,2)/Math.pow(B,2);if(R>1){C*=Math.sqrt(R);B*=Math.sqrt(R)}var J=(E==A?-1:1)*Math.sqrt((Math.pow(C,2)*Math.pow(B,2)-Math.pow(C,2)*Math.pow(Z.y,2)-Math.pow(B,2)*Math.pow(Z.x,2))/(Math.pow(C,2)*Math.pow(Z.y,2)+Math.pow(B,2)*Math.pow(Z.x,2)));if(isNaN(J)){J=0}var I=new n.Point(J*C*Z.y/B,J*-B*Z.x/C);var x=new n.Point((U.x+F.x)/2+Math.cos(t)*I.x-Math.sin(t)*I.y,(U.y+F.y)/2+Math.sin(t)*I.x+Math.cos(t)*I.y);var P=function(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2))};var L=function(s,r){return(s[0]*r[0]+s[1]*r[1])/(P(s)*P(r))};var X=function(s,r){return(s[0]*r[1]<s[1]*r[0]?-1:1)*Math.acos(L(s,r))};var Y=X([1,0],[(Z.x-I.x)/C,(Z.y-I.y)/B]);var H=[(Z.x-I.x)/C,(Z.y-I.y)/B];var G=[(-Z.x-I.x)/C,(-Z.y-I.y)/B];var V=X(H,G);if(L(H,G)<=-1){V=Math.PI}if(L(H,G)>=1){V=0}var O=1-A?1:-1;var T=Y+O*(V/2);var q=new n.Point(x.x+C*Math.cos(T),x.y+B*Math.sin(T));S.addMarkerAngle(q,T-O*Math.PI/2);S.addMarkerAngle(F,T-O*Math.PI);D.addPoint(F.x,F.y);if(Q!=null){var L=C>B?C:B;var M=C>B?1:C/B;var K=C>B?B/C:1;Q.translate(x.x,x.y);Q.rotate(t);Q.scale(M,K);Q.arc(0,0,L,Y,Y+V,1-A);Q.scale(1/M,1/K);Q.rotate(-t);Q.translate(-x.x,-x.y)}}break;case"Z":case"z":if(Q!=null){Q.closePath()}S.current=S.start}}return D};this.getMarkers=function(){var r=this.PathParser.getMarkerPoints();var t=this.PathParser.getMarkerAngles();var s=[];for(var q=0;q<r.length;q++){s.push([r[q],t[q]])}return s}};n.Element.path.prototype=new n.Element.PathElementBase();n.Element.pattern=function(o){this.base=n.Element.ElementBase;this.base(o);this.createPattern=function(A,r){var p=this.attribute("width").toPixels("x",true);var z=this.attribute("height").toPixels("y",true);var v=new n.Element.svg();v.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value);v.attributes.width=new n.Property("width",p+"px");v.attributes.height=new n.Property("height",z+"px");v.attributes.transform=new n.Property("transform",this.attribute("patternTransform").value);v.children=this.children;var t=document.createElement("canvas");t.width=p;t.height=z;var q=t.getContext("2d");if(this.attribute("x").hasValue()&&this.attribute("y").hasValue()){q.translate(this.attribute("x").toPixels("x",true),this.attribute("y").toPixels("y",true))}for(var w=-1;w<=1;w++){for(var u=-1;u<=1;u++){q.save();q.translate(w*t.width,u*t.height);v.render(q);q.restore()}}var s=A.createPattern(t,"repeat");return s}};n.Element.pattern.prototype=new n.Element.ElementBase();n.Element.marker=function(o){this.base=n.Element.ElementBase;this.base(o);this.baseRender=this.render;this.render=function(q,p,s){q.translate(p.x,p.y);if(this.attribute("orient").valueOrDefault("auto")=="auto"){q.rotate(s)}if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){q.scale(q.lineWidth,q.lineWidth)}q.save();var r=new n.Element.svg();r.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value);r.attributes.refX=new n.Property("refX",this.attribute("refX").value);r.attributes.refY=new n.Property("refY",this.attribute("refY").value);r.attributes.width=new n.Property("width",this.attribute("markerWidth").value);r.attributes.height=new n.Property("height",this.attribute("markerHeight").value);r.attributes.fill=new n.Property("fill",this.attribute("fill").valueOrDefault("black"));r.attributes.stroke=new n.Property("stroke",this.attribute("stroke").valueOrDefault("none"));r.children=this.children;r.render(q);q.restore();if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){q.scale(1/q.lineWidth,1/q.lineWidth)}if(this.attribute("orient").valueOrDefault("auto")=="auto"){q.rotate(-s)}q.translate(-p.x,-p.y)}};n.Element.marker.prototype=new n.Element.ElementBase();n.Element.defs=function(o){this.base=n.Element.ElementBase;this.base(o);this.render=function(p){}};n.Element.defs.prototype=new n.Element.ElementBase();n.Element.GradientBase=function(p){this.base=n.Element.ElementBase;this.base(p);this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox");this.stops=[];for(var o=0;o<this.children.length;o++){var q=this.children[o];if(q.type=="stop"){this.stops.push(q)}}this.getGradient=function(){};this.createGradient=function(D,u,r){var C=this;if(this.getHrefAttribute().hasValue()){C=this.getHrefAttribute().getDefinition()}var t=function(E){if(r.hasValue()){var F=new n.Property("color",E);return F.addOpacity(r.value).value}return E};var w=this.getGradient(D,u);if(w==null){return t(C.stops[C.stops.length-1].color)}for(var v=0;v<C.stops.length;v++){w.addColorStop(C.stops[v].offset,t(C.stops[v].color))}if(this.attribute("gradientTransform").hasValue()){var y=n.ViewPort.viewPorts[0];var z=new n.Element.rect();z.attributes.x=new n.Property("x",-n.MAX_VIRTUAL_PIXELS/3);z.attributes.y=new n.Property("y",-n.MAX_VIRTUAL_PIXELS/3);z.attributes.width=new n.Property("width",n.MAX_VIRTUAL_PIXELS);z.attributes.height=new n.Property("height",n.MAX_VIRTUAL_PIXELS);var B=new n.Element.g();B.attributes.transform=new n.Property("transform",this.attribute("gradientTransform").value);B.children=[z];var A=new n.Element.svg();A.attributes.x=new n.Property("x",0);A.attributes.y=new n.Property("y",0);A.attributes.width=new n.Property("width",y.width);A.attributes.height=new n.Property("height",y.height);A.children=[B];var x=document.createElement("canvas");x.width=y.width;x.height=y.height;var s=x.getContext("2d");s.fillStyle=w;A.render(s);return s.createPattern(x,"no-repeat")}return w}};n.Element.GradientBase.prototype=new n.Element.ElementBase();n.Element.linearGradient=function(o){this.base=n.Element.GradientBase;this.base(o);this.getGradient=function(p,t){var v=t.getBoundingBox();if(!this.attribute("x1").hasValue()&&!this.attribute("y1").hasValue()&&!this.attribute("x2").hasValue()&&!this.attribute("y2").hasValue()){this.attribute("x1",true).value=0;this.attribute("y1",true).value=0;this.attribute("x2",true).value=1;this.attribute("y2",true).value=0}var r=this.gradientUnits=="objectBoundingBox"?v.x()+v.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x");var u=this.gradientUnits=="objectBoundingBox"?v.y()+v.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y");var q=this.gradientUnits=="objectBoundingBox"?v.x()+v.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x");var s=this.gradientUnits=="objectBoundingBox"?v.y()+v.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");if(r==q&&u==s){return null}return p.createLinearGradient(r,u,q,s)}};n.Element.linearGradient.prototype=new n.Element.GradientBase();n.Element.radialGradient=function(o){this.base=n.Element.GradientBase;this.base(o);this.getGradient=function(q,s){var w=s.getBoundingBox();if(!this.attribute("cx").hasValue()){this.attribute("cx",true).value="50%"}if(!this.attribute("cy").hasValue()){this.attribute("cy",true).value="50%"}if(!this.attribute("r").hasValue()){this.attribute("r",true).value="50%"}var p=this.gradientUnits=="objectBoundingBox"?w.x()+w.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x");var x=this.gradientUnits=="objectBoundingBox"?w.y()+w.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y");var v=p;var t=x;if(this.attribute("fx").hasValue()){v=this.gradientUnits=="objectBoundingBox"?w.x()+w.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")}if(this.attribute("fy").hasValue()){t=this.gradientUnits=="objectBoundingBox"?w.y()+w.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y")}var u=this.gradientUnits=="objectBoundingBox"?(w.width()+w.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return q.createRadialGradient(v,t,0,p,x,u)}};n.Element.radialGradient.prototype=new n.Element.GradientBase();n.Element.stop=function(p){this.base=n.Element.ElementBase;this.base(p);this.offset=this.attribute("offset").numValue();if(this.offset<0){this.offset=0}if(this.offset>1){this.offset=1}var o=this.style("stop-color");if(this.style("stop-opacity").hasValue()){o=o.addOpacity(this.style("stop-opacity").value)}this.color=o.value};n.Element.stop.prototype=new n.Element.ElementBase();n.Element.AnimateBase=function(o){this.base=n.Element.ElementBase;this.base(o);n.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var q=this.attribute("attributeType").value;var p=this.attribute("attributeName").value;if(q=="CSS"){return this.parent.style(p,true)}return this.parent.attribute(p,true)};this.initialValue=null;this.initialUnits="";this.removed=false;this.calcValue=function(){return""};this.update=function(s){if(this.initialValue==null){this.initialValue=this.getProperty().value;this.initialUnits=this.getProperty().getUnits()}if(this.duration>this.maxDuration){if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite"){this.duration=0}else{if(this.attribute("fill").valueOrDefault("remove")=="remove"&&!this.removed){this.removed=true;this.getProperty().value=this.initialValue;return true}else{return false}}}this.duration=this.duration+s;var p=false;if(this.begin<this.duration){var r=this.calcValue();if(this.attribute("type").hasValue()){var q=this.attribute("type").value;r=q+"("+r+")"}this.getProperty().value=r;p=true}return p};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");if(this.values.hasValue()){this.values.value=this.values.value.split(";")}this.progress=function(){var r={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var t=r.progress*(this.values.value.length-1);var s=Math.floor(t),q=Math.ceil(t);r.from=new n.Property("from",parseFloat(this.values.value[s]));r.to=new n.Property("to",parseFloat(this.values.value[q]));r.progress=(t-s)/(q-s)}else{r.from=this.from;r.to=this.to}return r}};n.Element.AnimateBase.prototype=new n.Element.ElementBase();n.Element.animate=function(o){this.base=n.Element.AnimateBase;this.base(o);this.calcValue=function(){var r=this.progress();var q=r.from.numValue()+(r.to.numValue()-r.from.numValue())*r.progress;return q+this.initialUnits}};n.Element.animate.prototype=new n.Element.AnimateBase();n.Element.animateColor=function(o){this.base=n.Element.AnimateBase;this.base(o);this.calcValue=function(){var u=this.progress();var w=new e(u.from.value);var v=new e(u.to.value);if(w.ok&&v.ok){var t=w.r+(v.r-w.r)*u.progress;var s=w.g+(v.g-w.g)*u.progress;var q=w.b+(v.b-w.b)*u.progress;return"rgb("+parseInt(t,10)+","+parseInt(s,10)+","+parseInt(q,10)+")"}return this.attribute("from").value}};n.Element.animateColor.prototype=new n.Element.AnimateBase();n.Element.animateTransform=function(o){this.base=n.Element.AnimateBase;this.base(o);this.calcValue=function(){var s=this.progress();var u=n.ToNumberArray(s.from.value);var t=n.ToNumberArray(s.to.value);var r="";for(var q=0;q<u.length;q++){r+=u[q]+(t[q]-u[q])*s.progress+" "}return r}};n.Element.animateTransform.prototype=new n.Element.animate();n.Element.font=function(p){this.base=n.Element.ElementBase;this.base(p);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isRTL=false;this.isArabic=false;this.fontFace=null;this.missingGlyph=null;this.glyphs=[];for(var o=0;o<this.children.length;o++){var q=this.children[o];if(q.type=="font-face"){this.fontFace=q;if(q.style("font-family").hasValue()){n.Definitions[q.style("font-family").value]=this}}else{if(q.type=="missing-glyph"){this.missingGlyph=q}else{if(q.type=="glyph"){if(q.arabicForm!=""){this.isRTL=true;this.isArabic=true;if(typeof this.glyphs[q.unicode]=="undefined"){this.glyphs[q.unicode]=[]}this.glyphs[q.unicode][q.arabicForm]=q}else{this.glyphs[q.unicode]=q}}}}}};n.Element.font.prototype=new n.Element.ElementBase();n.Element.fontface=function(o){this.base=n.Element.ElementBase;this.base(o);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};n.Element.fontface.prototype=new n.Element.ElementBase();n.Element.missingglyph=function(o){this.base=n.Element.path;this.base(o);this.horizAdvX=0};n.Element.missingglyph.prototype=new n.Element.path();n.Element.glyph=function(o){this.base=n.Element.path;this.base(o);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};n.Element.glyph.prototype=new n.Element.path();n.Element.text=function(o){this.captureTextNodes=true;this.base=n.Element.RenderedElementBase;this.base(o);this.baseSetContext=this.setContext;this.setContext=function(p){this.baseSetContext(p);if(this.style("dominant-baseline").hasValue()){p.textBaseline=this.style("dominant-baseline").value}if(this.style("alignment-baseline").hasValue()){p.textBaseline=this.style("alignment-baseline").value}};this.getBoundingBox=function(){return new n.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)};this.renderChildren=function(p){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.x+=this.getAnchorDelta(p,this,0);for(var q=0;q<this.children.length;q++){this.renderChild(p,this,q)}};this.getAnchorDelta=function(q,u,t){var p=this.style("text-anchor").valueOrDefault("start");if(p!="start"){var s=0;for(var r=t;r<u.children.length;r++){var v=u.children[r];if(r>t&&v.attribute("x").hasValue()){break}s+=v.measureTextRecursive(q)}return -1*(p=="end"?s:s/2)}return 0};this.renderChild=function(p,r,q){var s=r.children[q];if(s.attribute("x").hasValue()){s.x=s.attribute("x").toPixels("x")+this.getAnchorDelta(p,r,q)}else{if(this.attribute("dx").hasValue()){this.x+=this.attribute("dx").toPixels("x")}if(s.attribute("dx").hasValue()){this.x+=s.attribute("dx").toPixels("x")}s.x=this.x}this.x=s.x+s.measureText(p);if(s.attribute("y").hasValue()){s.y=s.attribute("y").toPixels("y")}else{if(this.attribute("dy").hasValue()){this.y+=this.attribute("dy").toPixels("y")}if(s.attribute("dy").hasValue()){this.y+=s.attribute("dy").toPixels("y")}s.y=this.y}this.y=s.y;s.render(p);for(var q=0;q<s.children.length;q++){this.renderChild(p,s,q)}}};n.Element.text.prototype=new n.Element.RenderedElementBase();n.Element.TextElementBase=function(o){this.base=n.Element.RenderedElementBase;this.base(o);this.getGlyph=function(p,t,q){var u=t[q];var r=null;if(p.isArabic){var s="isolated";if((q==0||t[q-1]==" ")&&q<t.length-2&&t[q+1]!=" "){s="terminal"}if(q>0&&t[q-1]!=" "&&q<t.length-2&&t[q+1]!=" "){s="medial"}if(q>0&&t[q-1]!=" "&&(q==t.length-1||t[q+1]==" ")){s="initial"}if(typeof p.glyphs[u]!="undefined"){r=p.glyphs[u][s];if(r==null&&p.glyphs[u].type=="glyph"){r=p.glyphs[u]}}}else{r=p.glyphs[u]}if(r==null){r=p.missingGlyph}return r};this.renderChildren=function(w){var u=this.parent.style("font-family").getDefinition();if(u!=null){var x=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize);var r=this.parent.style("font-style").valueOrDefault(n.Font.Parse(n.ctx.font).fontStyle);var v=this.getText();if(u.isRTL){v=v.split("").reverse().join("")}var y=n.ToNumberArray(this.parent.attribute("dx").value);for(var s=0;s<v.length;s++){var t=this.getGlyph(u,v,s);var q=x/u.fontFace.unitsPerEm;w.translate(this.x,this.y);w.scale(q,-q);var p=w.lineWidth;w.lineWidth=w.lineWidth*u.fontFace.unitsPerEm/x;if(r=="italic"){w.transform(1,0,0.4,1,0,0)}t.render(w);if(r=="italic"){w.transform(1,0,-0.4,1,0,0)}w.lineWidth=p;w.scale(1/q,-1/q);w.translate(-this.x,-this.y);this.x+=x*(t.horizAdvX||u.horizAdvX)/u.fontFace.unitsPerEm;if(typeof y[s]!="undefined"&&!isNaN(y[s])){this.x+=y[s]}}return}if(w.fillStyle!=""){w.fillText(n.compressSpaces(this.getText()),this.x,this.y)}if(w.strokeStyle!=""){w.strokeText(n.compressSpaces(this.getText()),this.x,this.y)}};this.getText=function(){};this.measureTextRecursive=function(p){var r=this.measureText(p);for(var q=0;q<this.children.length;q++){r+=this.children[q].measureTextRecursive(p)}return r};this.measureText=function(w){var u=this.parent.style("font-family").getDefinition();if(u!=null){var x=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize);var q=0;var v=this.getText();if(u.isRTL){v=v.split("").reverse().join("")}var y=n.ToNumberArray(this.parent.attribute("dx").value);for(var s=0;s<v.length;s++){var t=this.getGlyph(u,v,s);q+=(t.horizAdvX||u.horizAdvX)*x/u.fontFace.unitsPerEm;if(typeof y[s]!="undefined"&&!isNaN(y[s])){q+=y[s]}}return q}var p=n.compressSpaces(this.getText());if(!w.measureText){return p.length*10}w.save();this.setContext(w);var r=w.measureText(p).width;w.restore();return r}};n.Element.TextElementBase.prototype=new n.Element.RenderedElementBase();n.Element.tspan=function(o){this.captureTextNodes=true;this.base=n.Element.TextElementBase;this.base(o);this.text=o.nodeValue||o.text||"";this.getText=function(){return this.text}};n.Element.tspan.prototype=new n.Element.TextElementBase();n.Element.tref=function(o){this.base=n.Element.TextElementBase;this.base(o);this.getText=function(){var p=this.getHrefAttribute().getDefinition();if(p!=null){return p.children[0].getText()}}};n.Element.tref.prototype=new n.Element.TextElementBase();n.Element.a=function(p){this.base=n.Element.TextElementBase;this.base(p);this.hasText=true;for(var o=0;o<p.childNodes.length;o++){if(p.childNodes[o].nodeType!=3){this.hasText=false}}this.text=this.hasText?p.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(q){if(this.hasText){this.baseRenderChildren(q);var s=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize);n.Mouse.checkBoundingBox(this,new n.BoundingBox(this.x,this.y-s.toPixels("y"),this.x+this.measureText(q),this.y))}else{var r=new n.Element.g();r.children=this.children;r.parent=this;r.render(q)}};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){n.ctx.canvas.style.cursor="pointer"}};n.Element.a.prototype=new n.Element.TextElementBase();n.Element.image=function(q){this.base=n.Element.RenderedElementBase;this.base(q);var p=this.getHrefAttribute().value;var r=p.match(/\.svg$/);n.Images.push(this);this.loaded=false;if(!r){this.img=document.createElement("img");var o=this;this.img.onload=function(){o.loaded=true};this.img.onerror=function(){if(typeof console!="undefined"){console.log('ERROR: image "'+p+'" not found');o.loaded=true}};this.img.src=p}else{this.img=n.ajax(p);this.loaded=true}this.renderChildren=function(u){var t=this.attribute("x").toPixels("x");var w=this.attribute("y").toPixels("y");var v=this.attribute("width").toPixels("x");var s=this.attribute("height").toPixels("y");if(v==0||s==0){return}u.save();if(r){u.drawSvg(this.img,t,w,v,s)}else{u.translate(t,w);n.AspectRatio(u,this.attribute("preserveAspectRatio").value,v,this.img.width,s,this.img.height,0,0);u.drawImage(this.img,0,0)}u.restore()};this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x");var v=this.attribute("y").toPixels("y");var u=this.attribute("width").toPixels("x");var s=this.attribute("height").toPixels("y");return new n.BoundingBox(t,v,t+u,v+s)}};n.Element.image.prototype=new n.Element.RenderedElementBase();n.Element.g=function(o){this.base=n.Element.RenderedElementBase;this.base(o);this.getBoundingBox=function(){var q=new n.BoundingBox();for(var p=0;p<this.children.length;p++){q.addBoundingBox(this.children[p].getBoundingBox())}return q}};n.Element.g.prototype=new n.Element.RenderedElementBase();n.Element.symbol=function(o){this.base=n.Element.RenderedElementBase;this.base(o);this.baseSetContext=this.setContext;this.setContext=function(q){this.baseSetContext(q);if(this.attribute("viewBox").hasValue()){var r=n.ToNumberArray(this.attribute("viewBox").value);var p=r[0];var s=r[1];width=r[2];height=r[3];n.AspectRatio(q,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,p,s);n.ViewPort.SetCurrent(r[2],r[3])}}};n.Element.symbol.prototype=new n.Element.RenderedElementBase();n.Element.style=function(E){this.base=n.Element.ElementBase;this.base(E);var A="";for(var H=0;H<E.childNodes.length;H++){A+=E.childNodes[H].nodeValue}A=A.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");A=n.compressSpaces(A);var z=A.split("}");for(var H=0;H<z.length;H++){if(n.trim(z[H])!=""){var L=z[H].split("{");var r=L[0].split(",");var o=L[1].split(";");for(var G=0;G<r.length;G++){var x=n.trim(r[G]);if(x!=""){var q={};for(var F=0;F<o.length;F++){var p=o[F].indexOf(":");var M=o[F].substr(0,p);var D=o[F].substr(p+1,o[F].length-p);if(M!=null&&D!=null){q[n.trim(M)]=new n.Property(n.trim(M),n.trim(D))}}n.Styles[x]=q;if(x=="@font-face"){var J=q["font-family"].value.replace(/"/g,"");var y=q.src.value.split(",");for(var B=0;B<y.length;B++){if(y[B].indexOf('format("svg")')>0){var v=y[B].indexOf("url");var u=y[B].indexOf(")",v);var t=y[B].substr(v+5,u-v-6);var K=n.parseXml(n.ajax(t));var w=K.getElementsByTagName("font");for(var I=0;I<w.length;I++){var C=n.CreateElement(w[I]);n.Definitions[J]=C}}}}}}}}};n.Element.style.prototype=new n.Element.ElementBase();n.Element.use=function(o){this.base=n.Element.RenderedElementBase;this.base(o);this.baseSetContext=this.setContext;this.setContext=function(p){this.baseSetContext(p);if(this.attribute("x").hasValue()){p.translate(this.attribute("x").toPixels("x"),0)}if(this.attribute("y").hasValue()){p.translate(0,this.attribute("y").toPixels("y"))}};this.getDefinition=function(){var p=this.getHrefAttribute().getDefinition();if(this.attribute("width").hasValue()){p.attribute("width",true).value=this.attribute("width").value}if(this.attribute("height").hasValue()){p.attribute("height",true).value=this.attribute("height").value}return p};this.path=function(p){var q=this.getDefinition();if(q!=null){q.path(p)}};this.getBoundingBox=function(){var p=this.getDefinition();if(p!=null){return p.getBoundingBox()}};this.renderChildren=function(p){var r=this.getDefinition();if(r!=null){var q=r.parent;r.parent=null;r.render(p);r.parent=q}}};n.Element.use.prototype=new n.Element.RenderedElementBase();n.Element.mask=function(o){this.base=n.Element.ElementBase;this.base(o);this.apply=function(B,r){var z=this.attribute("x").toPixels("x");var w=this.attribute("y").toPixels("y");var p=this.attribute("width").toPixels("x");var A=this.attribute("height").toPixels("y");if(p==0&&A==0){var t=new n.BoundingBox();for(var s=0;s<this.children.length;s++){t.addBoundingBox(this.children[s].getBoundingBox())}var z=Math.floor(t.x1);var w=Math.floor(t.y1);var p=Math.floor(t.width());var A=Math.floor(t.height())}var D=r.attribute("mask").value;r.attribute("mask").value="";var v=document.createElement("canvas");v.width=z+p;v.height=w+A;var C=v.getContext("2d");this.renderChildren(C);var u=document.createElement("canvas");u.width=z+p;u.height=w+A;var q=u.getContext("2d");r.render(q);q.globalCompositeOperation="destination-in";q.fillStyle=C.createPattern(v,"no-repeat");q.fillRect(0,0,z+p,w+A);B.fillStyle=q.createPattern(u,"no-repeat");B.fillRect(0,0,z+p,w+A);r.attribute("mask").value=D};this.render=function(p){}};n.Element.mask.prototype=new n.Element.ElementBase();n.Element.clipPath=function(o){this.base=n.Element.ElementBase;this.base(o);this.apply=function(p){for(var r=0;r<this.children.length;r++){var s=this.children[r];if(typeof s.path!="undefined"){var q=null;if(s.attribute("transform").hasValue()){q=new n.Transform(s.attribute("transform").value);q.apply(p)}s.path(p);p.clip();if(q){q.unapply(p)}}}};this.render=function(p){}};n.Element.clipPath.prototype=new n.Element.ElementBase();n.Element.filter=function(o){this.base=n.Element.ElementBase;this.base(o);this.apply=function(E,u){var v=u.getBoundingBox();var B=Math.floor(v.x1);var z=Math.floor(v.y1);var q=Math.floor(v.width());var D=Math.floor(v.height());var r=u.style("filter").value;u.style("filter").value="";var C=0,A=0;for(var t=0;t<this.children.length;t++){var p=this.children[t].extraFilterDistance||0;C=Math.max(C,p);A=Math.max(A,p)}var w=document.createElement("canvas");w.width=q+2*C;w.height=D+2*A;var s=w.getContext("2d");s.translate(-B+C,-z+A);u.render(s);for(var t=0;t<this.children.length;t++){this.children[t].apply(s,0,0,q+2*C,D+2*A)}E.drawImage(w,0,0,q+2*C,D+2*A,B-C,z-A,q+2*C,D+2*A);u.style("filter",true).value=r};this.render=function(p){}};n.Element.filter.prototype=new n.Element.ElementBase();n.Element.feMorphology=function(o){this.base=n.Element.ElementBase;this.base(o);this.apply=function(r,q,t,s,p){}};n.Element.feMorphology.prototype=new n.Element.ElementBase();n.Element.feColorMatrix=function(q){this.base=n.Element.ElementBase;this.base(q);function p(t,s,w,v,r,u){return t[w*v*4+s*4+u]}function o(t,s,z,v,r,u,w){t[z*v*4+s*4+u]=w}this.apply=function(D,A,z,t,C){var v=D.getImageData(0,0,t,C);for(var z=0;z<C;z++){for(var A=0;A<t;A++){var s=p(v.data,A,z,t,C,0);var u=p(v.data,A,z,t,C,1);var w=p(v.data,A,z,t,C,2);var B=(s+u+w)/3;o(v.data,A,z,t,C,0,B);o(v.data,A,z,t,C,1,B);o(v.data,A,z,t,C,2,B)}}D.clearRect(0,0,t,C);D.putImageData(v,0,0)}};n.Element.feColorMatrix.prototype=new n.Element.ElementBase();n.Element.feGaussianBlur=function(o){this.base=n.Element.ElementBase;this.base(o);this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.extraFilterDistance=this.blurRadius;this.apply=function(r,q,t,s,p){if(typeof k=="undefined"){if(typeof console!="undefined"){console.log("ERROR: StackBlur.js must be included for blur to work")}return}r.canvas.id=n.UniqueId();r.canvas.style.display="none";document.body.appendChild(r.canvas);k(r.canvas.id,q,t,s,p,this.blurRadius);document.body.removeChild(r.canvas)}};n.Element.feGaussianBlur.prototype=new n.Element.ElementBase();n.Element.title=function(o){};n.Element.title.prototype=new n.Element.ElementBase();n.Element.desc=function(o){};n.Element.desc.prototype=new n.Element.ElementBase();n.Element.MISSING=function(o){if(typeof console!="undefined"){console.log("ERROR: Element '"+o.nodeName+"' not yet implemented.")}};n.Element.MISSING.prototype=new n.Element.ElementBase();n.CreateElement=function(p){var o=p.nodeName.replace(/^[^:]+:/,"");o=o.replace(/\-/g,"");var q=null;if(typeof n.Element[o]!="undefined"){q=new n.Element[o](p)}else{q=new n.Element.MISSING(p)}q.type=p.nodeName;return q};n.load=function(o,p){n.loadXml(o,n.ajax(p))};n.loadXml=function(o,p){n.loadXmlDoc(o,n.parseXml(p))};n.loadXmlDoc=function(r,u){n.init(r);var q=function(w){var v=r.canvas;while(v){w.x-=v.offsetLeft;w.y-=v.offsetTop;v=v.offsetParent}if(window.scrollX){w.x+=window.scrollX}if(window.scrollY){w.y+=window.scrollY}return w};if(n.opts.ignoreMouse!=true){r.canvas.onclick=function(w){var v=q(new n.Point(w!=null?w.clientX:event.clientX,w!=null?w.clientY:event.clientY));n.Mouse.onclick(v.x,v.y)};r.canvas.onmousemove=function(w){var v=q(new n.Point(w!=null?w.clientX:event.clientX,w!=null?w.clientY:event.clientY));n.Mouse.onmousemove(v.x,v.y)}}var t=n.CreateElement(u.documentElement);t.root=true;var s=true;var p=function(){n.ViewPort.Clear();if(r.canvas.parentNode){n.ViewPort.SetCurrent(r.canvas.parentNode.clientWidth,r.canvas.parentNode.clientHeight)}if(n.opts.ignoreDimensions!=true){if(t.style("width").hasValue()){r.canvas.width=t.style("width").toPixels("x");r.canvas.style.width=r.canvas.width+"px"}if(t.style("height").hasValue()){r.canvas.height=t.style("height").toPixels("y");r.canvas.style.height=r.canvas.height+"px"}}var x=r.canvas.clientWidth||r.canvas.width;var w=r.canvas.clientHeight||r.canvas.height;if(n.opts.ignoreDimensions==true&&t.style("width").hasValue()&&t.style("height").hasValue()){x=t.style("width").toPixels("x");w=t.style("height").toPixels("y")}n.ViewPort.SetCurrent(x,w);if(n.opts.offsetX!=null){t.attribute("x",true).value=n.opts.offsetX}if(n.opts.offsetY!=null){t.attribute("y",true).value=n.opts.offsetY}if(n.opts.scaleWidth!=null&&n.opts.scaleHeight!=null){var y=1,v=1,z=n.ToNumberArray(t.attribute("viewBox").value);if(t.attribute("width").hasValue()){y=t.attribute("width").toPixels("x")/n.opts.scaleWidth}else{if(!isNaN(z[2])){y=z[2]/n.opts.scaleWidth}}if(t.attribute("height").hasValue()){v=t.attribute("height").toPixels("y")/n.opts.scaleHeight}else{if(!isNaN(z[3])){v=z[3]/n.opts.scaleHeight}}t.attribute("width",true).value=n.opts.scaleWidth;t.attribute("height",true).value=n.opts.scaleHeight;t.attribute("viewBox",true).value="0 0 "+x*y+" "+w*v;t.attribute("preserveAspectRatio",true).value="none"}if(n.opts.ignoreClear!=true){r.clearRect(0,0,x,w)}t.render(r);if(s){s=false;if(typeof n.opts.renderCallback=="function"){n.opts.renderCallback(u)}}};var o=true;if(n.ImagesLoaded()){o=false;p()}n.intervalID=setInterval(function(){var w=false;if(o&&n.ImagesLoaded()){o=false;w=true}if(n.opts.ignoreMouse!=true){w=w|n.Mouse.hasEvents()}if(n.opts.ignoreAnimation!=true){for(var v=0;v<n.Animations.length;v++){w=w|n.Animations[v].update(1000/n.FRAMERATE)}}if(typeof n.opts.forceRedraw=="function"){if(n.opts.forceRedraw()==true){w=true}}if(w){p();n.Mouse.runEvents()}},1000/n.FRAMERATE)};n.stop=function(){if(n.intervalID){clearInterval(n.intervalID)}};n.Mouse=new function(){this.events=[];this.hasEvents=function(){return this.events.length!=0};this.onclick=function(o,p){this.events.push({type:"onclick",x:o,y:p,run:function(q){if(q.onclick){q.onclick()}}})};this.onmousemove=function(o,p){this.events.push({type:"onmousemove",x:o,y:p,run:function(q){if(q.onmousemove){q.onmousemove()}}})};this.eventElements=[];this.checkPath=function(q,o){for(var p=0;p<this.events.length;p++){var r=this.events[p];if(o.isPointInPath&&o.isPointInPath(r.x,r.y)){this.eventElements[p]=q}}};this.checkBoundingBox=function(p,r){for(var o=0;o<this.events.length;o++){var q=this.events[o];if(r.isPointInBox(q.x,q.y)){this.eventElements[o]=p}}};this.runEvents=function(){n.ctx.canvas.style.cursor="";for(var p=0;p<this.events.length;p++){var q=this.events[p];var o=this.eventElements[p];while(o){q.run(o);o=o.parent}}this.events=[];this.eventElements=[]}}();return n}})();if(typeof CanvasRenderingContext2D!="undefined"){CanvasRenderingContext2D.prototype.drawSvg=function(p,n,m,o,q){canvg(this.canvas,p,{ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,offsetX:n,offsetY:m,scaleWidth:o,scaleHeight:q})}}return canvg}};
/*!
 * 输出转换器，提供输出支持
 */
;b[1]={value:function(g){var h=b.r(34),l=b.r(0);return h.createClass("Output",{constructor:function(n){this.formula=n},toJPG:function(n){d(this.formula,"image/jpeg",n)},toPNG:function(n){d(this.formula,"image/png",n)}});function d(q,o,n){var p=q.container.getRenderBox();return e(q.node.ownerDocument,{width:p.width,height:p.height,content:j(q.node)},o,n)}function e(u,s,r,n){var q=null,p=arguments,o=null;if(true){k.apply(null,p)}else{q=m(u,s.width,s.height,r);o=q.getContext("2d");var t=new Image();t.onload=function(){try{o.drawImage(t,0,0);n(q.toDataURL(r))}catch(v){k.apply(null,p)}};t.src=f(s.content)}}function j(o){var n=o.ownerDocument.createElement("div"),p=['<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="',o.getAttribute("width"),'" height="',o.getAttribute("height"),'">'];n.appendChild(o.cloneNode(true));return n.innerHTML.replace(/<svg[^>]+?>/i,p.join("")).replace(/&nbsp;/g,"")}function f(n){return"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(n)))}function m(s,r,n,q){var p=s.createElement("canvas"),o=p.getContext("2d");p.width=r;p.height=n;if(q!=="image/png"){o.fillStyle="white";o.fillRect(0,0,p.width,p.height)}return p}function k(r,q,p,n){var o=m(r,q.width,q.height,p);o.style.cssText="position: absolute; top: 0; left: 100000px; z-index: -1;";window.setTimeout(function(){r.body.appendChild(o);l(o,q.content);r.body.removeChild(o);n(o.toDataURL(p))},0)}}};
/*!
 * 所有字符的列表
 */
;b[2]={value:function(){return["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","&#x237;","&#x131;","&#x3b1;","&#x3b2;","&#x3b3;","&#x3b4;","&#x3b5;","&#x3b6;","&#x3b7;","&#x3b8;","&#x3b9;","&#x3ba;","&#x3bb;","&#x3bc;","&#x3bd;","&#x3be;","&#x3bf;","&#x3c0;","&#x3c1;","&#x3c2;","&#x3c3;","&#x3c4;","&#x3c5;","&#x3c6;","&#x3c7;","&#x3c8;","&#x3c9;","&#x3d1;","&#x3d5;","&#x3d6;","&#x3de;","&#x3dc;","&#x3f5;","&#x3f1;","&#x3f9;","&#x211c;","&#x2135;","&#x2111;","&#x2127;","&#x2136;","&#x2137;","&#x2138;","&#xf0;","&#x210f;","&#x2141;","&#x210e;","&#x2202;","&#x2118;","&#x214c;","&#x2132;","&#x2201;","&#x2113;","&#x24c8;","(",")","&#x393;","&#x394;","&#x395;","&#x396;","&#x397;","&#x398;","&#x399;","&#x39a;","&#x39b;","&#x39c;","&#x39d;","&#x39e;","&#x39f;","&#x3a0;","&#x3a1;","&#x3a3;","&#x3a4;","&#x3a5;","&#x3a6;","&#x3a7;","&#x3a8;","&#x3a9;","&#x391;","&#x392;","#","!","$","%","&#x26;","&#x2220;","&#x2032;","&#x2035;","&#x2605;","&#x25c6;","&#x25a0;","&#x25b2;","&#x25bc;","&#x22a4;","&#x22a5;","&#x2663;","&#x2660;","&#x2662;","&#x2661;","&#x2203;","&#x2204;","&#x266d;","&#x266e;","&#x266f;","&#x2200;","&#x221e;","&#x2221;","&#x2207;","&#xac;","&#x2222;","&#x221a;","&#x25b3;","&#x25bd;","&#x2205;","&#xf8;","&#x25c7;","&#x25c0;","&#x25b8;","[","]","{","}","&#x3008;","&#x3009;","&#x3f0;",",",".","/",":",";","?","\\","&#x22ee;","&#x22ef;","&#x22f0;","&#x2026;","@","&#x22;","'","|","^","`","&#x201c;","_","*","+","-","&#x2210;","&#x22bc;","&#x22bb;","&#x25ef;","&#x22a1;","&#x229f;","&#x229e;","&#x22a0;","&#x2022;","&#x2229;","&#x222a;","&#x22d2;","&#x22d3;","&#x22d0;","&#x22d1;","&#xb7;","&#x25aa;","&#x25e6;","&#x229b;","&#x229a;","&#x2296;","&#x2299;","&#x229d;","&#x2295;","&#x2297;","&#x2298;","&#xb1;","&#x2213;","&#x22cf;","&#x22ce;","&#x2020;","&#x2021;","&#x22c4;","&#xf7;","&#x22c7;","&#x2214;","&#x232d;","&#x22d7;","&#x22d6;","&#x22c9;","&#x22ca;","&#x22cb;","&#x22cc;","&#x2293;","&#x2294;","&#x2291;","&#x2292;","&#x228f;","&#x2290;","&#x22c6;","&#xd7;","&#x22b3;","&#x22b2;","&#x22b5;","&#x22b4;","&#x228e;","&#x2228;","&#x2227;","&#x2240;","&#x3c;","=","&#x3e;","&#x2248;","&#x2247;","&#x224d;","&#x2252;","&#x2253;","&#x224a;","&#x223d;","&#x2241;","&#x2242;","&#x2243;","&#x22cd;","&#x224f;","&#x224e;","&#x2257;","&#x2245;","&#x22de;","&#x22df;","&#x2250;","&#x2251;","&#x2256;","&#x2a96;","&#x2a95;","&#x2261;","&#x2265;","&#x2264;","&#x2266;","&#x2267;","&#x2a7e;","&#x2a7d;","&#x226b;","&#x226a;","&#x2268;","&#x2269;","&#x22d8;","&#x22d9;","&#x2a87;","&#x2a88;","&#x2a89;","&#x2a8a;","&#x22e7;","&#x22e6;","&#x2a86;","&#x2a85;","&#x22db;","&#x22da;","&#x2a8b;","&#x2a8c;","&#x2277;","&#x2276;","&#x2273;","&#x2272;","&#x232e;","&#x232f;","&#x226f;","&#x2271;","&#x2270;","&#x226e;","&#x2331;","&#x2330;","&#x2332;","&#x2333;","&#x226c;","&#x2280;","&#x2281;","&#x22e0;","&#x22e1;","&#x227a;","&#x227b;","&#x227c;","&#x227d;","&#x227e;","&#x227f;","&#x2282;","&#x2283;","&#x2288;","&#x2289;","&#x2286;","&#x2287;","&#x228a;","&#x228b;","&#x2ab7;","&#x2ab8;","&#x2aaf;","&#x2ab0;","&#x2ab9;","&#x2aba;","&#x2ab5;","&#x2ab6;","&#x22e8;","&#x22e9;","&#x223c;","&#x225c;","&#x21b6;","&#x21b7;","&#x21ba;","&#x21bb;","&#x21be;","&#x21bf;","&#x21c2;","&#x21c3;","&#x21c4;","&#x21c6;","&#x21c8;","&#x21ca;","&#x21cb;","&#x21cc;","&#x21cd;","&#x21ce;","&#x21cf;","&#x21d0;","&#x21d1;","&#x21d2;","&#x21d3;","&#x21d4;","&#x21d5;","&#x21da;","&#x21db;","&#x21dd;","&#x21ab;","&#x21ac;","&#x21ad;","&#x21ae;","&#x2190;","&#x2191;","&#x2192;","&#x2193;","&#x2194;","&#x2195;","&#x2196;","&#x2197;","&#x2198;","&#x2199;","&#x219e;","&#x21a0;","&#x21a2;","&#x21a3;","&#x21b0;","&#x21b1;","&#x22a2;","&#x22a3;","&#x22a8;","&#x22a9;","&#x22aa;","&#x22ad;","&#x22af;","&#x22b8;","&#x22ba;","&#x22d4;","&#x22ea;","&#x22eb;","&#x22ec;","&#x22ed;","&#x2308;","&#x2309;","&#x230a;","&#x230b;","&#x2acb;","&#x2acc;","&#x2ac5;","&#x2ac6;","&#x2208;","&#x220b;","&#x221d;","&#x2224;","&#x2226;","&#x2234;","&#x2235;","&#x220d;","&#x22c8;","&#x2322;","&#x2323;","&#x2223;","&#x2225;","&#x23d0;","&#x23d1;","&#x23d2;","&#x23d3;","&#x2ac7;","&#x2ac8;","&#x22ae;","&#x22ac;","&#x2ac9;","&#x23d4;","&#x23d5;","&#x23d6;","&#x23d7;","&#x21c7;","&#x21c9;","&#x21bc;","&#x21bd;","&#x21c0;","&#x21c1;","&#x219a;","&#x219b;","&#x27f5;","&#x27f6;","&#x27f7;","&#x27f9;","&#x27f8;","&#x27fa;","&#x2262;","&#x2260;","&#x2209;"]}};
/*!
 * 字符配置
 */
;b[3]={value:function(){return{defaultFont:"KF AMS MAIN"}}};
/*!
 * 工厂方法，创建兼容各浏览器的text实现
 */
;b[4]={value:function(g){var h=b.r(34),j=document.createElement("div"),e="http://www.w3.org/XML/1998/namespace";function d(k){var l=new h.Text();if("innerHTML" in l.node){l.node.setAttributeNS(e,"xml:space","preserve")}else{if(k.indexOf(" ")!=-1){k=f(k)}}l.setContent(k);return l}function f(k){j.innerHTML='<svg><text gg="asfdas">'+k.replace(/\s/gi,"&nbsp;")+"</text></svg>";return j.firstChild.firstChild.textContent}return{create:function(k){return d(k)}}}};b[5]={value:function(e){var h=b.r(34),d=b.r(47).font,g=b.r(25),f=b.r(4);return h.createClass("Text",{base:b.r(46),constructor:function(k,j){this.callBase();this.fontFamily=j;this.fontSize=50;this.content=k||"";this.box.remove();this.translationContent=this.translation(this.content);this.contentShape=new h.Group();this.contentNode=this.createContent();this.contentShape.addShape(this.contentNode);this.addShape(this.contentShape)},createContent:function(){var j=f.create(this.translationContent);j.setAttr({"font-family":this.fontFamily,"font-size":50,x:0,y:d.offset});return j},setFamily:function(j){this.fontFamily=j;this.contentNode.setAttr("font-family",j)},setFontSize:function(j){this.fontSize=j;this.contentNode.setAttr("font-size",j+"px");this.contentNode.setAttr("y",j/50*d.offset)},getBaseHeight:function(){var m=this.contentShape.getItems(),k=null,l=0,j=0;while(k=m[l]){j=Math.max(j,k.getHeight());l++}return j},translation:function(k){var j=this.fontFamily;return k.replace(/``/g,"“").replace(/\\([a-zA-Z,]+)\\/g,function(m,l){if(l===","){return" "}var n=g.getCharacterValue(l,j);if(!n){return""}return n})}})}};b[6]={value:function(){return{UNKNOWN:-1,EXP:0,COMPOUND_EXP:1,OP:2}}};b[7]={value:function(){return{SIDE:"side",FOLLOW:"follow"}}};b[8]={value:function(d){var e=b.r(34);return e.createClass("SubscriptExpression",{base:b.r(17),constructor:function(f,g){this.callBase(f,null,g);this.setFlag("Subscript")}})}};b[9]={value:function(d){var e=b.r(34);return e.createClass("SuperscriptExpression",{base:b.r(17),constructor:function(f,g){this.callBase(f,g,null);this.setFlag("Superscript")}})}};b[10]={value:function(d){var e=b.r(34);return e.createClass("BinaryExpression",{base:b.r(19),constructor:function(f,g){this.callBase();this.setFirstOperand(f);this.setLastOperand(g)},setFirstOperand:function(f){return this.setOperand(f,0)},getFirstOperand:function(){return this.getOperand(0)},setLastOperand:function(f){return this.setOperand(f,1)},getLastOperand:function(){return this.getOperand(1)}})}};b[11]={value:function(d){var e=b.r(34),f=b.r(35);return e.createClass("BracketsExpression",{base:b.r(19),constructor:function(h,g,j){this.callBase();this.setFlag("Brackets");if(arguments.length===2){j=g;g=h}this.leftSymbol=h;this.rightSymbol=g;this.setOperator(new f());this.setOperand(j,0)},getLeftSymbol:function(){return this.leftSymbol},getRightSymbol:function(){return this.rightSymbol}})}};b[12]={value:function(f){var g=b.r(34),e=b.r(47).font,d=b.r(36);return g.createClass("CombinationExpression",{base:b.r(19),constructor:function(){this.callBase();this.setFlag("Combination");this.setOperator(new d());g.Utils.each(arguments,function(h,j){this.setOperand(h,j)},this)},getRenderBox:function(h){var j=this.callBase(h);if(this.getOperands().length===0){j.height=e.spaceHeight}return j},getBaseline:function(k){var j=0,h=this.getOperands();if(h.length===0){return this.callBase(k)}g.Utils.each(h,function(l){j=Math.max(l.getBaseline(k),j)});return j},getMeanline:function(j){var k=10000000,h=this.getOperands();if(h.length===0){return this.callBase(j)}g.Utils.each(h,function(l){k=Math.min(l.getMeanline(j),k)});return k}})}};b[13]={value:function(d){var e=b.r(34),f=b.r(38);return e.createClass("FractionExpression",{base:b.r(10),constructor:function(h,g){this.callBase(h,g);this.setFlag("Fraction");this.setOperator(new f())},getBaseline:function(h){var g=this.getOperand(1),j=g.getRenderBox(h);return j.y+g.getBaselineProportion()*j.height},getMeanline:function(g){var h=this.getOperand(0),j=h.getRenderBox(g);return h.getMeanlineProportion()*j.height}})}};b[14]={value:function(e){var g=b.r(34),f=b.r(47).func,d=b.r(39);return g.createClass("FunctionExpression",{base:b.r(19),constructor:function(l,k,h,j){this.callBase();this.setFlag("Func");this.funcName=l;this.setOperator(new d(l));this.setExpr(k);this.setSuperscript(h);this.setSubscript(j)},isSideScript:function(){return !f["ud-script"][this.funcName]},setExpr:function(h){return this.setOperand(h,0)},setSuperscript:function(h){return this.setOperand(h,1)},setSubscript:function(h){return this.setOperand(h,2)}})}};b[15]={value:function(e){var f=b.r(34),g=b.r(40),d=f.createClass("IntegrationExpression",{base:b.r(19),constructor:function(h,k,j){this.callBase();this.setFlag("Integration");this.setOperator(new g());this.setIntegrand(h);this.setSuperscript(k);this.setSubscript(j)},setType:function(h){this.getOperator().setType(h);return this},resetType:function(){this.getOperator().resetType();return this},setIntegrand:function(h){this.setOperand(h,0)},setSuperscript:function(h){this.setOperand(h,1)},setSubscript:function(h){this.setOperand(h,2)}});return d}};b[16]={value:function(e){var f=b.r(34),d=b.r(42);return f.createClass("RadicalExpression",{base:b.r(10),constructor:function(h,g){this.callBase(h,g);this.setFlag("Radicand");this.setOperator(new d())},setRadicand:function(g){return this.setFirstOperand(g)},getRadicand:function(){return this.getFirstOperand()},setExponent:function(g){return this.setLastOperand(g)},getExponent:function(){return this.getLastOperand()}})}};b[17]={value:function(d){var e=b.r(34),f=b.r(43);return e.createClass("ScriptExpression",{base:b.r(19),constructor:function(g,j,h){this.callBase();this.setFlag("Script");this.setOperator(new f());this.setOpd(g);this.setSuperscript(j);this.setSubscript(h)},setOpd:function(g){this.setOperand(g,0)},setSuperscript:function(g){this.setOperand(g,1)},setSubscript:function(g){this.setOperand(g,2)}})}};b[18]={value:function(e){var f=b.r(34),d=b.r(44);return f.createClass("SummationExpression",{base:b.r(19),constructor:function(j,h,g){this.callBase();this.setFlag("Summation");this.setOperator(new d());this.setExpr(j);this.setSuperscript(h);this.setSubscript(g)},setExpr:function(g){this.setOperand(g,0)},setSuperscript:function(g){this.setOperand(g,1)},setSubscript:function(g){this.setOperand(g,2)}})}};b[19]={value:function(d){var g=b.r(34),f=b.r(6),e=b.r(21);return g.createClass("CompoundExpression",{base:b.r(21),constructor:function(){this.callBase();this.type=f.COMPOUND_EXP;this.operands=[];this.operator=null;this.operatorBox=new g.Group();this.operatorBox.setAttr("data-type","kf-editor-exp-op-box");this.operandBox=new g.Group();this.operandBox.setAttr("data-type","kf-editor-exp-operand-box");this.setChildren(0,this.operatorBox);this.setChildren(1,this.operandBox)},setOperator:function(h){if(h===undefined){return this}if(this.operator){this.operator.remove()}this.operatorBox.addShape(h);this.operator=h;this.operator.setParentExpression(this);h.expression=this;return this},getOperator:function(){return this.operator},setOperand:function(h,j,k){if(k===false){this.operands[j]=h;return this}h=e.wrap(h);if(this.operands[j]){this.operands[j].remove()}this.operands[j]=h;this.operandBox.addShape(h);return this},getOperand:function(h){return this.operands[h]},getOperands:function(){return this.operands},addedCall:function(){this.operator.applyOperand.apply(this.operator,this.operands);return this}})}};b[20]={value:function(e){var g=b.r(34),d=b.r(47).font,f=b.r(21),h=g.createClass("EmptyExpression",{base:f,constructor:function(){this.callBase();this.setFlag("Empty")},getRenderBox:function(){return{width:0,height:d.spaceHeight,x:0,y:0}}});h.isEmpty=function(j){return j instanceof h};f.registerWrap("empty",function(j){if(j===null||j===undefined){return new h()}});return h}};b[21]={value:function(f){var j=b.r(34),h=b.r(6),e=b.r(47).font,k=[],d={},g=j.createClass("Expression",{base:b.r(46),constructor:function(){this.callBase();this.type=h.EXP;this._offset={top:0,bottom:0};this.children=[];this.box.fill("transparent").setAttr("data-type","kf-editor-exp-box");this.box.setAttr("data-type","kf-editor-exp-bg-box");this.expContent=new j.Group();this.expContent.setAttr("data-type","kf-editor-exp-content-box");this.addShape(this.expContent)},getChildren:function(){return this.children},getChild:function(l){return this.children[l]||null},getTopOffset:function(){return this._offset.top},getBottomOffset:function(){return this._offset.bottom},getOffset:function(){return this._offset},setTopOffset:function(l){this._offset.top=l},setBottomOffset:function(l){this._offset.bottom=l},setOffset:function(m,l){this._offset.top=m;this._offset.bottom=l},setFlag:function(l){this.setAttr("data-flag",l||"Expression")},setChildren:function(l,m){if(this.children[l]){this.children[l].remove()}this.children[l]=m;this.expContent.addShape(m)},getBaselineProportion:function(){return e.baselinePosition},getMeanlineProportion:function(){return e.meanlinePosition},getBaseline:function(l){return this.getRenderBox(l).height*e.baselinePosition-3},getMeanline:function(l){return this.getRenderBox(l).height*e.meanlinePosition-1},getAscenderline:function(){return this.getFixRenderBox().height*e.ascenderPosition},getDescenderline:function(){return this.getFixRenderBox().height*e.descenderPosition},translateElement:function(l,m){this.expContent.translate(l,m)},expand:function(m,l){var n=this.getFixRenderBox();this.setBoxSize(n.width+m,n.height+l)},getBaseWidth:function(){return this.getWidth()},getBaseHeight:function(){return this.getHeight()},updateBoxSize:function(){var l=this.expContent.getFixRenderBox();this.setBoxSize(l.width,l.height)},getBox:function(){return this.box}});j.Utils.extend(g,{registerWrap:function(l,m){d[l]=k.length;k.push(m)},revokeWrap:function(l){var m=null;if(l in d){m=k[d[l]];k[d[l]]=null;delete d[l]}return m},wrap:function(m){var l;j.Utils.each(k,function(n){if(!n){return}l=n(m);if(l){return false}});return l}});return g}};b[22]={value:function(e){var h=b.r(5),j=b.r(34),d=b.r(3),f=b.r(21),g=j.createClass("TextExpression",{base:b.r(21),constructor:function(l,k){this.callBase();this.fontFamily=k||d.defaultFont;this.setFlag("Text");this.content=l+"";this.textContent=new h(this.content,this.fontFamily);this.setChildren(0,this.textContent);this.setChildren(1,new j.Rect(0,0,0,0).fill("transparent"))},setFamily:function(k){this.textContent.setFamily(k)},setFontSize:function(k){this.textContent.setFontSize(k)},addedCall:function(){var k=this.textContent.getFixRenderBox();this.getChild(1).setSize(k.width,k.height);this.updateBoxSize();return this}});f.registerWrap("text",function(k){var l=typeof k;if(l==="number"||l==="string"){k=new g(k)}return k});return g}};
/*!
 * 字体信息检测模板，用于检测浏览器的字体信息
 */
;b[23]={value:function(){return['<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">','<text id="abcd" font-family="KF AMS MAIN" font-size="50" x="0" y="0">x</text>',"</svg>"]}};
/*!
 * 字体安装器
 */
;b[24]={value:function(e){var f=b.r(34),o=b.r(25),h=b.r(33),g=b.r(47).font,m=b.r(2),n=[];return f.createClass("FontInstaller",{constructor:function(r,q){this.callBase();this.resource=q||"../src/resource/";this.doc=r},mount:function(t){var s=o.getFontList(),r=0,q=this;f.Utils.each(s,function(u){r++;u.meta.src=q.resource+u.meta.src;q.createFontStyle(u);l(q.doc,u,function(){r--;if(r===0){d(q.doc,t)}})})},createFontStyle:function(q){var s=this.doc.createElement("style"),r='@font-face{\nfont-family: "${fontFamily}";\nsrc: url("${src}");\n}';s.setAttribute("type","text/css");s.innerHTML=r.replace("${fontFamily}",q.meta.fontFamily).replace("${src}",q.meta.src);this.doc.head.appendChild(s)}});function l(r,q,s){h.get(q.meta.src,function(u,t){if(t==="success"){j(r,q)}s()})}function d(q,r){window.setTimeout(function(){p(q);k();r()},100)}function j(t,r){var s=document.createElement("div"),q=r.meta.fontFamily;s.style.cssText="position: absolute; top: -10000px; left: -100000px;";s.style.fontFamily=q;s.innerHTML=m.join("");t.body.appendChild(s);n.push(s)}function p(r){var q=r.createElement("div");q.style.cssText="position: absolute; top: 0; left: -100000px;";q.innerHTML=b.r(23).join("");r.body.appendChild(q);var s=q.getElementsByTagName("text")[0].getBBox();g.spaceHeight=s.height;g.topSpace=-s.y-g.baseline;g.bottomSpace=g.spaceHeight-g.topSpace-g.baseHeight;g.offset=g.baseline+g.topSpace;g.baselinePosition=(g.topSpace+g.baseline)/g.spaceHeight;g.meanlinePosition=(g.topSpace+g.meanline)/g.spaceHeight;g.ascenderPosition=g.topSpace/g.spaceHeight;g.descenderPosition=(g.topSpace+g.baseHeight)/g.spaceHeight;r.body.removeChild(q)}function k(){f.Utils.each(n,function(q){q.parentNode.removeChild(q)});n=[]}}};
/*!
 * 字体管理器
 */
;b[25]={value:function(d){var e={},f=b.r(34),g=b.r(47).font.list;(function(){f.Utils.each(g,function(h){e[h.meta.fontFamily]=h})})();return{getFontList:function(){return e},getCharacterValue:function(j,h){if(!e[h]){return null}return e[h].map[j]||null}}}};
/*!
 * 双线字体
 */
;b[26]={value:function(){return{meta:{fontFamily:"KF AMS BB",src:"KF_AMS_BB.woff"}}}};
/*!
 * 手写体
 */
;b[27]={value:function(){return{meta:{fontFamily:"KF AMS CAL",src:"KF_AMS_CAL.woff"}}}};
/*!
 * 花体
 */
;b[28]={value:function(){return{meta:{fontFamily:"KF AMS FRAK",src:"KF_AMS_FRAK.woff"}}}};
/*!
 * 字体主文件
 */
;b[29]={value:function(){return{meta:{fontFamily:"KF AMS MAIN",src:"KF_AMS_MAIN.woff"},map:{Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",varkappa:"ϰ",chi:"χ",psi:"ψ",omega:"ω",digamma:"Ϝ",varepsilon:"ϵ",varrho:"ϱ",varphi:"ϕ",vartheta:"ϑ",varpi:"ϖ",varsigma:"Ϲ",aleph:"ℵ",beth:"ℶ",daleth:"ℸ",gimel:"ℷ",eth:"ð",hbar:"ℎ",hslash:"ℏ",mho:"℧",partial:"∂",wp:"℘",Game:"⅁",Bbbk:"⅌",Finv:"Ⅎ",Im:"ℑ",Re:"ℜ",complement:"∁",ell:"ℓ",circledS:"Ⓢ",imath:"ı",jmath:"ȷ",doublecap:"⋒",Cap:"⋒",doublecup:"⋓",Cup:"⋓",ast:"*",divideontimes:"⋇",rightthreetimes:"⋌",leftthreetimes:"⋋",cdot:"·",odot:"⊙",dotplus:"∔",rtimes:"⋊",ltimes:"⋉",centerdot:"▪",doublebarwedge:"⌭",setminus:"⒁",amalg:"∐",circ:"◦",bigcirc:"◯",gtrdot:"⋗",lessdot:"⋖",smallsetminus:"⒅",circledast:"⊛",circledcirc:"⊚",sqcap:"⊓",sqcup:"⊔",barwedge:"⊼",circleddash:"⊝",star:"⋆",bigtriangledown:"▽",bigtriangleup:"△",cup:"∪",cap:"∩",times:"×",mp:"∓",pm:"±",triangleleft:"⊲",triangleright:"⊳",boxdot:"⊡",curlyvee:"⋏",curlywedge:"⋎",boxminus:"⊟",boxtimes:"⊠",ominus:"⊖",oplus:"⊕",oslash:"⊘",otimes:"⊗",uplus:"⊎",boxplus:"⊞",dagger:"†",ddagger:"‡",vee:"∨",lor:"∨",veebar:"⊻",bullet:"•",diamond:"⋄",wedge:"∧",land:"∧",div:"÷",wr:"≀",geqq:"≧",lll:"⋘",llless:"⋘",ggg:"⋙",gggtr:"⋙",preccurlyeq:"≼",geqslant:"⩾",lnapprox:"⪉",preceq:"⪯",gg:"≫",lneq:"⪇",precnapprox:"⪹",approx:"≈",lneqq:"≨",precneqq:"⪵",approxeq:"≊",gnapprox:"⪊",lnsim:"⋦",precnsim:"⋨",asymp:"≍",gneq:"⪈",lvertneqq:"⌮",precsim:"≾",backsim:"∽",gneqq:"≩",ncong:"≇",risingdotseq:"≓",backsimeq:"⋍",gnsim:"⋧",sim:"∼",simeq:"≃",bumpeq:"≏",gtrapprox:"⪆",ngeq:"≱",Bumpeq:"≎",gtreqless:"⋛",ngeqq:"⌱",succ:"≻",circeq:"≗",gtreqqless:"⪌",ngeqslant:"⌳",succapprox:"⪸",cong:"≅",gtrless:"≷",ngtr:"≯",succcurlyeq:"≽",curlyeqprec:"⋞",gtrsim:"≳",nleq:"≰",succeq:"⪰",curlyeqsucc:"⋟",gvertneqq:"⌯",neq:"≠",ne:"≠",nequiv:"≢",nleqq:"⌰",succnapprox:"⪺",doteq:"≐",leq:"≤",le:"≤",nleqslant:"⌲",succneqq:"⪶",doteqdot:"≑",Doteq:"≑",leqq:"≦",nless:"≮",succnsim:"⋩",leqslant:"⩽",nprec:"⊀",succsim:"≿",eqsim:"≂",lessapprox:"⪅",npreceq:"⋠",eqslantgtr:"⪖",lesseqgtr:"⋚",nsim:"≁",eqslantless:"⪕",lesseqqgtr:"⪋",nsucc:"⊁",triangleq:"≜",eqcirc:"≖",equiv:"≡",lessgtr:"≶",nsucceq:"⋡",fallingdotseq:"≒",lesssim:"≲",prec:"≺",geq:"≥",ge:"≥",ll:"≪",precapprox:"⪷",uparrow:"↑",downarrow:"↓",updownarrow:"↕",Uparrow:"⇑",Downarrow:"⇓",Updownarrow:"⇕",circlearrowleft:"↺",circlearrowright:"↻",curvearrowleft:"↶",curvearrowright:"↷",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",leftarrow:"←",gets:"←",Leftarrow:"⇐",leftarrowtail:"↢",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇄",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",Lleftarrow:"⇚",looparrowleft:"↫",looparrowright:"↬",multimap:"⊸",nLeftarrow:"⇍",nRightarrow:"⇏",nLeftrightarrow:"⇎",nearrow:"↗",nleftarrow:"↚",nleftrightarrow:"↮",nrightarrow:"↛",nwarrow:"↖",rightarrow:"→",to:"→",Rightarrow:"⇒",rightarrowtail:"↣",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇆",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"⇝",Rrightarrow:"⇛",searrow:"↘",swarrow:"↙",twoheadleftarrow:"↞",twoheadrightarrow:"↠",upharpoonleft:"↿",upharpoonright:"↾",restriction:"↾",upuparrows:"⇈",Lsh:"↰",Rsh:"↱",longleftarrow:"⟵",longrightarrow:"⟶",Longleftarrow:"⟸",Longrightarrow:"⟹",implies:"⟹",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",backepsilon:"∍",because:"∵",therefore:"∴",between:"≬",blacktriangleleft:"◀",blacktriangleright:"▸",dashv:"⊣",bowtie:"⋈",frown:"⌢","in":"∈",notin:"∉",mid:"∣",parallel:"∥",models:"⊨",ni:"∋",owns:"∋",nmid:"∤",nparallel:"∦",nshortmid:"⏒",nshortparallel:"⏓",nsubseteq:"⊈",nsubseteqq:"⫇",nsupseteq:"⊉",nsupseteqq:"⫈",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nvdash:"⊬",nVdash:"⊮",nvDash:"⊭",nVDash:"⊯",perp:"⊥",pitchfork:"⋔",propto:"∝",shortmid:"⏐",shortparallel:"⏑",smile:"⌣",sqsubset:"⊏",sqsubseteq:"⊑",sqsupset:"⊐",sqsupseteq:"⊒",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",subsetneq:"⊊",subsetneqq:"⫋",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",trianglelefteq:"⊴",trianglerighteq:"⊵",varpropto:"⫉",varsubsetneq:"⏔",varsubsetneqq:"⏖",varsupsetneq:"⏕",varsupsetneqq:"⏗",vdash:"⊢",Vdash:"⊩",vDash:"⊨",Vvdash:"⊪",vert:"|",Vert:"ǁ","|":"ǁ","{":"{","}":"}",backslash:"\\",langle:"〈",rangle:"〉",lceil:"⌈",rceil:"⌉",lbrace:"{",rbrace:"}",lfloor:"⌊",rfloor:"⌋",cdots:"⋯",ddots:"⋰",vdots:"⋮",dots:"…",ldots:"…","#":"#",bot:"⊥",angle:"∠",backprime:"‵",bigstar:"★",blacklozenge:"◆",blacksquare:"■",blacktriangle:"▲",blacktriangledown:"▼",clubsuit:"♣",diagdown:"⒁",diagup:"⒂",diamondsuit:"♢",emptyset:"ø",exists:"∃",flat:"♭",forall:"∀",heartsuit:"♡",infty:"∞",lozenge:"◇",measuredangle:"∡",nabla:"∇",natural:"♮",neg:"¬",lnot:"¬",nexists:"∄",prime:"′",sharp:"♯",spadesuit:"♠",sphericalangle:"∢",surd:"√",top:"⊤",varnothing:"∅",triangle:"△",triangledown:"▽"}}}};
/*!
 * 罗马字体
 */
;b[30]={value:function(){return{meta:{fontFamily:"KF AMS ROMAN",src:"KF_AMS_ROMAN.woff"}}}};b[31]={value:function(e){var f=b.r(34),k=b.r(6),p=b.r(25),n=b.r(24),d={fontsize:50,autoresize:true,padding:[0]},l=b.r(1),o=10,m=f.createClass("ExpressionWrap",{constructor:function(r,q){this.wrap=new f.Group();this.bg=new f.Rect(0,0,0,0).fill("transparent");this.exp=r;this.config=q;this.wrap.setAttr("data-type","kf-exp-wrap");this.bg.setAttr("data-type","kf-exp-wrap-bg");this.wrap.addShape(this.bg);this.wrap.addShape(this.exp)},getWrapShape:function(){return this.wrap},getExpression:function(){return this.exp},getBackground:function(){return this.bg},resize:function(){var r=this.config.padding,q=this.exp.getFixRenderBox();if(r.length===1){r[1]=r[0]}this.bg.setSize(r[1]*2+q.width,r[0]*2+q.height);this.exp.translate(r[1],r[0])}}),g=f.createClass("Formula",{base:b.r(32),constructor:function(q,r){this.callBase(q);this.expressions=[];this.fontInstaller=new n(this);this.config=f.Utils.extend({},d,r);this.initEnvironment();this.initInnerFont()},getContentContainer:function(){return this.container},initEnvironment:function(){this.zoom=this.config.fontsize/50;if("width" in this.config){this.setWidth(this.config.width)}if("height" in this.config){this.setHeight(this.config.height)}this.node.setAttribute("font-size",d.fontsize)},initInnerFont:function(){var s=p.getFontList(),q=this;f.Utils.each(s,function(t){r(t)});function r(t){var v=q.doc.createElement("style"),u='@font-face{font-family: "${fontFamily}";font-style: normal;src: url("${src}") format("woff");}';v.setAttribute("type","text/css");v.innerHTML=u.replace("${fontFamily}",t.meta.fontFamily).replace("${src}",t.meta.src);q.resourceNode.appendChild(v)}},insertExpression:function(s,q){var r=this.wrap(s);this.container.clearTransform();this.expressions.splice(q,0,r.getWrapShape());this.addShape(r.getWrapShape());h.call(this,r.getExpression());r.resize();j.call(this);this.resetZoom();this.config.autoresize&&this.resize()},appendExpression:function(q){this.insertExpression(q,this.expressions.length)},resize:function(){var q=this.container.getRenderBox("paper");this.node.setAttribute("width",q.width);this.node.setAttribute("height",q.height)},resetZoom:function(){var q=this.zoom/this.getBaseZoom();if(q!==0){this.container.scale(q)}},wrap:function(q){return new m(q,this.config)},clear:function(){this.callBase();this.expressions=[]},clearExpressions:function(){f.Utils.each(this.expressions,function(q){q.remove()});this.expressions=[]},toJPG:function(q){new l(this).toJPG(q)},toPNG:function(q){new l(this).toPNG(q)}});f.Utils.extend(g,{registerFont:function(q){p.registerFont(q)}});function j(){var q=0;f.Utils.each(this.expressions,function(s){var r=null;if(!s){return}s.setMatrix(new f.Matrix(1,0,0,1,0,0));r=s.getFixRenderBox();s.translate(0-r.x,q);q+=r.height+o});return this}function h(s){var q=0;if(!s){return}if(s.getType()===k.EXP){for(var r=0,q=s.getChildren().length;r<q;r++){h(s.getChild(r))}}else{if(s.getType()===k.COMPOUND_EXP){for(var r=0,q=s.getOperands().length;r<q;r++){h(s.getOperand(r))}h(s.getOperator())}}s.addedCall&&s.addedCall()}return g}};b[32]={value:function(d){var e=b.r(34);return e.createClass("FPaper",{base:e.Paper,constructor:function(f){this.callBase(f);this.doc=f.ownerDocument;this.container=new e.Group();this.container.setAttr("data-type","kf-container");this.background=new e.Group();this.background.setAttr("data-type","kf-bg");this.baseZoom=1;this.zoom=1;this.base("addShape",this.background);this.base("addShape",this.container)},getZoom:function(){return this.zoom},getBaseZoom:function(){return this.baseZoom},addShape:function(f,g){return this.container.addShape(f,g)},getBackground:function(){return this.background},removeShape:function(f){return this.container.removeShape(f)},clear:function(){return this.container.clear()}})}};b[33]={value:function(){if(!window.jQuery){throw new Error("Missing jQuery")}return window.jQuery}};b[34]={value:function(){if(!window.kity){throw new Error("Missing Kity Graphic Lib")}return window.kity}};b[35]={value:function(e){var g=b.r(34),f=b.r(5);return g.createClass("BracketsOperator",{base:b.r(41),constructor:function(){this.callBase("Brackets")},applyOperand:function(h){d.call(this,h)}});function d(p){var n=this.getParentExpression().getLeftSymbol(),h=this.getParentExpression().getRightSymbol(),l=p.getFixRenderBox().height,m=new g.Group(),o=0,j=new f(n,"KF AMS MAIN").fill("black"),k=new f(h,"KF AMS MAIN").fill("black");j.setFontSize(l);k.setFontSize(l);this.addOperatorShape(m.addShape(j).addShape(k));o+=j.getFixRenderBox().width;p.translate(o,0);o+=p.getFixRenderBox().width;k.translate(o,0)}}};b[36]={value:function(d){var e=b.r(34);return e.createClass("CombinationOperator",{base:b.r(41),constructor:function(){this.callBase("Combination")},applyOperand:function(){var f=0,g=arguments,l=0,j=0,m=0,h=[],k=[];e.Utils.each(g,function(n){var o=n.getFixRenderBox(),p=n.getOffset();o.height-=p.top+p.bottom;h.push(o);k.push(p);j=Math.max(p.top,j);m=Math.max(p.bottom,m);l=Math.max(o.height,l)});e.Utils.each(g,function(n,o){var p=h[o];n.translate(f-p.x,(l-(p.y+p.height))/2+m-k[o].bottom);f+=p.width});this.parentExpression.setOffset(j,m);this.parentExpression.updateBoxSize()}})}};
/*!
 * 上下标控制器
 */
;b[37]={value:function(e){var f=b.r(34),g=b.r(20),d={subOffset:0,supOffset:0,zoom:0.66};return f.createClass("ScriptController",{constructor:function(k,m,h,l,j){this.observer=k.getParentExpression();this.target=m;this.sup=h;this.sub=l;this.options=f.Utils.extend({},d,j)},applyUpDown:function(){var m=this.target,j=this.sup,l=this.sub,k=this.options;j.scale(k.zoom);l.scale(k.zoom);var h=m.getFixRenderBox();if(g.isEmpty(j)&&g.isEmpty(l)){return{width:h.width,height:h.height,top:0,bottom:0}}else{if(!g.isEmpty(j)&&g.isEmpty(l)){return this.applyUp(m,j)}else{if(g.isEmpty(j)&&!g.isEmpty(l)){return this.applyDown(m,l)}else{return this.applyUpDownScript(m,j,l)}}}},applySide:function(){var l=this.target,h=this.sup,j=this.sub;if(g.isEmpty(h)&&g.isEmpty(j)){var k=l.getRenderBox(this.observer);return{width:k.width,height:k.height,top:0,bottom:0}}else{if(g.isEmpty(h)&&!g.isEmpty(j)){return this.applySideSub(l,j)}else{if(!g.isEmpty(h)&&g.isEmpty(j)){return this.applySideSuper(l,h)}else{return this.applySideScript(l,h,j)}}}},applySideSuper:function(m,k){k.scale(this.options.zoom);var n=m.getRenderBox(this.observer),q=k.getRenderBox(this.observer),j=m.getMeanline(this.observer),p=k.getBaseline(this.observer),l=j,o=p-l,h={top:0,bottom:0,width:n.width+q.width,height:n.height};k.translate(n.width,0);if(this.options.supOffset){k.translate(this.options.supOffset,0)}if(o>0){m.translate(0,o);h.bottom=o;h.height+=o}else{k.translate(0,-o)}return h},applySideSub:function(o,j){j.scale(this.options.zoom);var p=o.getRenderBox(this.observer),k=j.getRenderBox(this.observer),l=j.getOffset(),n=o.getBaseline(this.observer),m=(k.height+l.top+l.bottom)/2,q=p.height-n-m,h={top:0,bottom:0,width:p.width+k.width,height:p.height};j.translate(p.width,l.top+n-m);if(this.options.subOffset){j.translate(this.options.subOffset,0)}if(q<0){h.top=-q;h.height-=q}return h},applySideScript:function(s,q,j){q.scale(this.options.zoom);j.scale(this.options.zoom);var t=s.getRenderBox(this.observer),m=j.getRenderBox(this.observer),w=q.getRenderBox(this.observer),n=s.getMeanline(this.observer),r=s.getBaseline(this.observer),v=q.getBaseline(this.observer),l=j.getAscenderline(this.observer),u=n,p=n+(r-n)*2/3,o=u-v,k=t.height-p-(m.height-l),h={top:0,bottom:0,width:t.width+Math.max(m.width,w.width),height:t.height};q.translate(t.width,o);j.translate(t.width,p-l);if(this.options.supOffset){q.translate(this.options.supOffset,0)}if(this.options.subOffset){j.translate(this.options.subOffset,0)}if(o>0){if(k<0){t.height-=k;h.top=-k}}else{s.translate(0,-o);q.translate(0,-o);j.translate(0,-o);h.height-=o;if(k>0){h.bottom=-o}else{h.height-=k;o=-o;k=-k;if(o>k){h.bottom=o-k}else{h.top=k-o}}}return h},applyUp:function(m,k){var j=k.getFixRenderBox(),h=m.getFixRenderBox(),l={width:Math.max(h.width,j.width),height:j.height+h.height,top:0,bottom:j.height};k.translate((l.width-j.width)/2,0);m.translate((l.width-h.width)/2,j.height);return l},applyDown:function(m,k){var h=k.getFixRenderBox(),j=m.getFixRenderBox(),l={width:Math.max(j.width,h.width),height:h.height+j.height,top:h.height,bottom:0};k.translate((l.width-h.width)/2,j.height);m.translate((l.width-j.width)/2,0);return l},applyUpDownScript:function(o,l,m){var k=l.getFixRenderBox(),h=m.getFixRenderBox(),j=o.getFixRenderBox(),n={width:Math.max(j.width,k.width,h.width),height:k.height+h.height+j.height,top:0,bottom:0};l.translate((n.width-k.width)/2,0);o.translate((n.width-j.width)/2,k.height);m.translate((n.width-h.width)/2,k.height+j.height);return n}})}};b[38]={value:function(e){var f=b.r(34),d=b.r(47).zoom;return f.createClass("FractionOperator",{base:b.r(41),constructor:function(){this.callBase("Fraction")},applyOperand:function(n,j){n.scale(d);j.scale(d);var o=Math.ceil(n.getWidth()),m=Math.ceil(j.getWidth()),s=Math.ceil(n.getHeight()),l=Math.ceil(j.getHeight()),h=3,p=1,r=Math.max(o,m),q=Math.max(s,l),k=g(r,h);this.addOperatorShape(k);n.translate((r-o)/2+h,0);k.translate(0,s+1);j.translate((r-m)/2+h,s+k.getHeight()+1*2);this.parentExpression.setOffset(q-s,q-l);this.parentExpression.expand(p*2,p*2);this.parentExpression.translateElement(p,p)}});function g(h,j){return new f.Rect(h+j*2,1).fill("black")}}};b[39]={value:function(d){var g=b.r(34),f=b.r(5),e=b.r(37);return g.createClass("FunctionOperator",{base:b.r(41),constructor:function(j){this.callBase("Function: "+j);this.funcName=j},applyOperand:function(p,m,k){var r=h.call(this),q=p.getFixRenderBox(),l=this.parentExpression.isSideScript()?"applySide":"applyUpDown",j=new e(this,r,m,k,{zoom:0.5})[l](),n=5,o=(j.height+j.top+j.bottom-q.height)/2;r.translate(0,j.top);m.translate(0,j.top);k.translate(0,j.top);if(o>=0){p.translate(j.width+n,o)}else{o=-o;r.translate(0,o);m.translate(0,o);k.translate(0,o);p.translate(j.width+n,0)}this.parentExpression.expand(n,n*2);this.parentExpression.translateElement(n,n)}});function h(){var j=new f(this.funcName,"KF AMS ROMAN");this.addOperatorShape(j);j.getBaseline=function(){return j.getFixRenderBox().height};j.getMeanline=function(){return 0};return j}}};b[40]={value:function(d){var f=b.r(34),e=b.r(37);return f.createClass("IntegrationOperator",{base:b.r(41),constructor:function(g){this.callBase("Integration");this.opType=g||1},setType:function(g){this.opType=g|0},resetType:function(){this.opType=1},applyOperand:function(o,h,k){var j=this.getOperatorShape(),n=3,g=o.getFixRenderBox(),l=new e(this,j,h,k,{supOffset:3,subOffset:-15}).applySide(),m=(l.height+l.top-g.height)/2;j.translate(0,l.top);h.translate(0,l.top);k.translate(0,l.top);if(m>=0){o.translate(l.width+n,m)}else{m=-m;j.translate(0,m);h.translate(0,m);k.translate(0,m);o.translate(l.width+n,0)}this.parentExpression.expand(n,n*2);this.parentExpression.translateElement(n,n)},getOperatorShape:function(){var n="M1.318,48.226c0,0,0.044,0.066,0.134,0.134c0.292,0.313,0.626,0.447,1.006,0.447c0.246,0.022,0.358-0.044,0.604-0.268   c0.782-0.782,1.497-2.838,2.324-6.727c0.514-2.369,0.938-4.693,1.586-8.448C8.559,24.068,9.9,17.878,11.978,9.52   c0.917-3.553,1.922-7.576,3.866-8.983C16.247,0.246,16.739,0,17.274,0c1.564,0,2.503,1.162,2.592,2.57   c0,0.827-0.424,1.386-1.273,1.386c-0.671,0-1.229-0.514-1.229-1.251c0-0.805,0.514-1.095,1.185-1.274   c0.022,0-0.291-0.29-0.425-0.379c-0.201-0.134-0.514-0.224-0.737-0.224c-0.067,0-0.112,0-0.157,0.022   c-0.469,0.134-0.983,0.939-1.453,2.234c-0.537,1.475-0.961,3.174-1.631,6.548c-0.424,2.101-0.693,3.464-1.229,6.727   c-1.608,9.185-2.949,15.487-5.006,23.756c-0.514,2.034-0.849,3.24-1.207,4.335c-0.559,1.698-1.162,2.95-1.811,3.799   c-0.514,0.715-1.385,1.408-2.436,1.408c-1.363,0-2.391-1.185-2.458-2.592c0-0.804,0.447-1.363,1.273-1.363   c0.671,0,1.229,0.514,1.229,1.251C2.503,47.757,1.989,48.047,1.318,48.226z",l=new f.Group(),m=new f.Group(),h=new f.Path(n).fill("black"),g=new f.Rect(0,0,0,0).fill("transparent"),k=null;m.addShape(h);l.addShape(g);l.addShape(m);this.addOperatorShape(l);for(var j=1;j<this.opType;j++){k=new f.Use(h).translate(h.getWidth()/2*j,0);m.addShape(k)}m.scale(1.6);k=null;l.getBaseline=function(){return m.getFixRenderBox().height};l.getMeanline=function(){return 10};return l}})}};b[41]={value:function(d){var f=b.r(34),e=b.r(6);return f.createClass("Operator",{base:b.r(46),constructor:function(g){this.callBase();this.type=e.OP;this.parentExpression=null;this.operatorName=g;this.operatorShape=new f.Group();this.addShape(this.operatorShape)},applyOperand:function(){throw new Error("applyOperand is abstract")},setParentExpression:function(g){this.parentExpression=g},getParentExpression:function(){return this.parentExpression},clearParentExpression:function(){this.parentExpression=null},addOperatorShape:function(g){return this.operatorShape.addShape(g)},getOperatorShape:function(){return this.operatorShape}})}};b[42]={value:function(k){var m=b.r(34),d=1,n=2*Math.PI/360,h=Math.sin(15*n),f=Math.cos(15*n),g=Math.tan(15*n);return m.createClass("RadicalOperator",{base:b.r(41),constructor:function(){this.callBase("Radical")},applyOperand:function(s,r){q.call(this,s,r)}});function q(w,u){var s=e(w),r=l(w),v=5,t=o(w);this.addOperatorShape(s);this.addOperatorShape(r);this.addOperatorShape(t);p.call(this,j(s,r,t),this.operatorShape,w,u);this.parentExpression.expand(0,v*2);this.parentExpression.translateElement(0,v)}function e(v){var s=new m.Path(),r=d,u=v.getHeight()/3,t=s.getDrawer();t.moveTo(0,f*r*6);t.lineBy(h*r,f*r);t.lineBy(f*r*3,-h*r*3);t.lineBy(g*u,u);t.lineBy(h*r*3,-f*r*3);t.lineBy(-h*u,-u);t.close();return s.fill("black")}function l(r){var s=new m.Path(),u=r.getHeight()*0.9,t=s.getDrawer();t.moveTo(g*u,0);t.lineTo(0,u);t.lineBy(h*d*3,f*d*3);t.lineBy(g*u+h*d*3,-(u+3*d*f));t.close();return s.fill("black")}function o(s){var r=s.getWidth()+2*d;return new m.Rect(r,2*d).fill("black")}function j(s,r,u){var t=s.getFixRenderBox(),v=r.getFixRenderBox();r.translate(t.width-h*d*3,0);s.translate(0,v.height-t.height);v=r.getFixRenderBox();u.translate(v.x+v.width-d/f,0);return{x:v.x+v.width-d/f,y:0}}function p(r,t,x,w){var u=null,v={x:0,y:0},s=t.getFixRenderBox();w.scale(0.66);u=w.getFixRenderBox();if(u.width>0&&u.height>0){v.y=u.height-s.height/2;if(v.y<0){w.translate(0,-v.y);v.y=0}v.x=u.width+s.height/2*g-r.x}t.translate(v.x,v.y);x.translate(v.x+r.x+d,v.y+2*d)}}};b[43]={value:function(d){var f=b.r(34),e=b.r(37);return f.createClass("ScriptOperator",{base:b.r(41),constructor:function(g){this.callBase(g||"Script")},applyOperand:function(g,h,k){var m=1,j=this.parentExpression,l=new e(this,g,h,k).applySide();this.getOperatorShape();l&&j.setOffset(l.top,l.bottom);j.expand(4,m*2);j.translateElement(2,m)}})}};b[44]={value:function(d){var f=b.r(34),e=b.r(37);return f.createClass("SummationOperator",{base:b.r(41),constructor:function(){this.callBase("Summation");this.displayType="equation"},applyOperand:function(o,h,k){var j=this.getOperatorShape(),g=o.getFixRenderBox(),n=0,l=new e(this,j,h,k).applyUpDown(),m=(l.height-l.top-l.bottom-g.height)/2;if(m>=0){o.translate(l.width+n,m+l.bottom)}else{m=-m;j.translate(0,m);h.translate(0,m);k.translate(0,m);o.translate(l.width+n,l.bottom)}this.parentExpression.setOffset(l.top,l.bottom);this.parentExpression.expand(n,n*2);this.parentExpression.translateElement(n,n)},getOperatorShape:function(){var k="M0.672,33.603c-0.432,0-0.648,0-0.648-0.264c0-0.024,0-0.144,0.24-0.432l12.433-14.569L0,0.96c0-0.264,0-0.72,0.024-0.792   C0.096,0.024,0.12,0,0.672,0h28.371l2.904,6.745h-0.6C30.531,4.8,28.898,3.72,28.298,3.336c-1.896-1.2-3.984-1.608-5.28-1.8   c-0.216-0.048-2.4-0.384-5.617-0.384H4.248l11.185,15.289c0.168,0.24,0.168,0.312,0.168,0.36c0,0.12-0.048,0.192-0.216,0.384   L3.168,31.515h14.474c4.608,0,6.96-0.624,7.464-0.744c2.76-0.72,5.305-2.352,6.241-4.848h0.6l-2.904,7.681H0.672z",l=new f.Path(k).fill("black"),j=new f.Rect(0,0,0,0).fill("transparent"),g=new f.Group(),h=null;g.addShape(j);g.addShape(l);l.scale(1.6);this.addOperatorShape(g);h=l.getFixRenderBox();if(this.displayType==="inline"){l.translate(5,15);j.setSize(h.width+10,h.height+25)}else{l.translate(2,5);j.setSize(h.width+4,h.height+8)}return g}})}};
/*!
 * 资源管理器
 * 负责管理资源的加载，并在资源ready之后提供Formula构造器
 */
;b[45]={value:function(e){var f=b.r(34),l=[],h=b.r(47).resource,n=b.r(24),g=b.r(31),j=false,o=false;return{ready:function(p,q){if(!o){o=true;m(q)}if(j){window.setTimeout(function(){p(g)},0)}else{l.push(p)}}};function m(p){p=f.Utils.extend({},h,p);if(!/^(https?:)?\/\//.test(p.path)){p.path=k(p.path)}new n(document,p.path).mount(d)}function d(){f.Utils.each(l,function(p){p(g)})}function k(r){var q=location.pathname.split("/"),p;q.length-=1;q=q.join("/")+"/";p=[location.protocol,"//",location.host,q,r.replace(/^\//,"")];return p.join("")}}};
/*!
 * 所有符号的基类
 * @abstract
 */
;b[46]={value:function(d){var f=b.r(34),e=b.r(6);return f.createClass("SignGroup",{base:f.Group,constructor:function(){this.callBase();this.box=new f.Rect(0,0,0,0);this.type=e.UNKNOWN;this.addShape(this.box);this.zoom=1},setZoom:function(g){this.zoom=g},getZoom:function(){return this.zoom},setBoxSize:function(g,j){return this.box.setSize(g,j)},setBoxWidth:function(g){return this.box.setWidth(g)},setBoxHeight:function(g){return this.box.setHeight(g)},getType:function(){return this.type},getBaseHeight:function(){return this.getHeight()},getBaseWidth:function(){return this.getWidth()},addedCall:function(){}})}};
/*!
 * 系统项目配置文件.
 */
;b[47]={value:function(d){return{zoom:0.66,font:{meanline:Math.round(380/1000*50),baseline:Math.round(800/1000*50),baseHeight:50,list:[b.r(29),b.r(27),b.r(28),b.r(26),b.r(30)]},resource:{path:"src/resource/"},func:{"ud-script":{lim:true}}}}};
/*!
 * 启动代码
 */
;b[48]={value:function(d){window.kf={ResourceManager:b.r(45),Operator:b.r(41),Expression:b.r(21),CompoundExpression:b.r(19),TextExpression:b.r(22),EmptyExpression:b.r(20),CombinationExpression:b.r(12),FunctionExpression:b.r(14),FractionExpression:b.r(13),IntegrationExpression:b.r(15),RadicalExpression:b.r(16),ScriptExpression:b.r(17),SuperscriptExpression:b.r(9),SubscriptExpression:b.r(8),SummationExpression:b.r(18),BracketsExpression:b.r(11)}}};var a={"kf.start":48};function c(d){b.r([a[d]])}(function(d){var g=kity.Shape.getRenderBox;kity.extendClass(kity.Shape,{getFixRenderBox:function(){return this.getRenderBox(this.container.container)},getTranslate:function(){return this.transform.translate}});try{c("kf.start")}catch(f){}})(this)})();